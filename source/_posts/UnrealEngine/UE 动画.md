---
title: UE 动画
tags: UnrealEngine
categories: UnrealEngine
abbrlink: a03f1555
date: 2023-08-29 03:57:00
---
<meta name="referrer" content="no-referrer" />

<a name="IFtLj"></a>
# 之前的一些总结
<a name="M6ohn"></a>
## 蒙皮与FK,IK的概念
三维软件的角色是通过骨骼控制角色模型动作的，骨骼和角色模型相互独立，将骨骼绑定到角色模型的技术叫蒙皮。<br />FK与IK：FK是正向运动，IK是反向运动，FK是级别高的骨骼带动级别低的骨骼，例如走路时手臂的摇摆，IK与FK相反，是级别低的骨骼带动级别高的骨骼，例如擦玻璃时，是手掌带动整个胳膊运动。
<a name="jTR27"></a>
## 角色导入与动画混合
创建一个新的文件夹名字为角色名→文件夹里创建文件夹为Mesh和Animation→导入无动画的骨骼模型放到Mesh文件夹中→导入各种动画的骨骼（无需再次导入模型）放入Animation文件夹→![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615548358755-7ee34d49-9bcc-4da9-bc13-bfe0a2833990.png#averageHue=%23c19118&height=298&id=e6Ovq&originHeight=298&originWidth=601&originalType=binary&ratio=1&rotation=0&showTitle=false&size=103244&status=done&style=none&title=&width=601)创建一个混合空间1D（因为示例是混合的从行走到奔跑动画的混合，比较简单所以使用1D）→点开混合空间1D<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615549809742-da96efc0-10dc-44b0-9cb9-c016a7ed0367.png#averageHue=%23bab49c&height=1058&id=GZHFN&originHeight=1058&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1031036&status=done&style=none&title=&width=1920)<br />在混合框中按住shift再移动鼠标可以查看混合效果。<br />混合空间1D和混合空间的区别：[https://docs.unrealengine.com/zh-CN/AnimatingObjects/SkeletalMeshAnimation/Blendspaces/Overview/index.html](https://docs.unrealengine.com/zh-CN/AnimatingObjects/SkeletalMeshAnimation/Blendspaces/Overview/index.html)
<a name="dKJUB"></a>
## 动画蓝图
<a name="Pyiv4"></a>
### 动画蓝图的创建：
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615554001545-da3cb170-d8ea-4e68-b989-06a7b953c446.png#averageHue=%2344741f&height=444&id=AL8dX&originHeight=444&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&size=390803&status=done&style=none&title=&width=997)
<a name="lckbi"></a>
### 

<a name="Na1iN"></a>
### 基础的动画蓝图（行走，跑步，跳跃）
事件图表：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615556227574-0246dd87-0a23-4b28-b224-2433ae58a074.png#averageHue=%232f2e2e&height=1058&id=eUU7c&originHeight=1058&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=522547&status=done&style=none&title=&width=1920)<br />动画图表：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615556271429-c31a0768-12a4-4b21-8c1a-073ffb3789ed.png#averageHue=%232d2d2c&height=291&id=cTZM7&originHeight=291&originWidth=663&originalType=binary&ratio=1&rotation=0&showTitle=false&size=52988&status=done&style=none&title=&width=663)<br />Movement状态机：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615556297568-1578366a-f80a-44cb-863d-44fcf946d628.png#averageHue=%232a2a29&height=639&id=H9Pow&originHeight=639&originWidth=1220&originalType=binary&ratio=1&rotation=0&showTitle=false&size=88627&status=done&style=none&title=&width=1220)<br />idle/Run到Jumpstart（规则）：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559203195-43f7e2fa-bb06-4a42-a80f-445a687a1d93.png#averageHue=%23322e2c&height=96&id=kwatC&originHeight=96&originWidth=432&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21499&status=done&style=none&title=&width=432)<br />顺时针规则依次为![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559269527-61fc6d75-e5f1-4e1e-8980-5c9ce2774916.png#averageHue=%232a2929&height=138&id=jxMgW&originHeight=138&originWidth=843&originalType=binary&ratio=1&rotation=0&showTitle=false&size=39577&status=done&style=none&title=&width=843)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559282458-1e36f717-8aa9-4953-8b05-7691d37eb2a2.png#averageHue=%232d2a2a&height=142&id=ObIUN&originHeight=142&originWidth=620&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29628&status=done&style=none&title=&width=620)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559289478-541de89d-b2ef-47cc-abdd-e203b88f72cf.png#averageHue=%23292928&height=171&id=uqyB1&originHeight=171&originWidth=829&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41223&status=done&style=none&title=&width=829)<br />idle/Run（状态）（双击Idle/Run进入）：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559339765-20bc365f-c448-466c-94d3-8753c3d24c0e.png#averageHue=%23292929&height=300&id=hILRR&originHeight=300&originWidth=683&originalType=binary&ratio=1&rotation=0&showTitle=false&size=53813&status=done&style=none&title=&width=683)<br />顺时针依次为：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559372216-d7948de0-6b90-46e2-bcd7-814f58e4f066.png#averageHue=%232e2c2c&height=186&id=zq3y6&originHeight=186&originWidth=500&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28827&status=done&style=none&title=&width=500)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559384434-0a791d0a-a1c4-423c-9531-657ea38ed96f.png#averageHue=%232e2d2c&height=178&id=yE9mm&originHeight=178&originWidth=519&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29165&status=done&style=none&title=&width=519)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559393797-ebe05444-d852-4221-b518-ed161f95df97.png#averageHue=%232c2b2a&height=221&id=wjXNt&originHeight=221&originWidth=571&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31392&status=done&style=none&title=&width=571)<br />其中播放什么什么的节点是通过将![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615559417447-b07afcec-bf28-4a94-8ba5-b72e08751cac.png#averageHue=%23494949&height=241&id=xCfd4&originHeight=241&originWidth=251&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16163&status=done&style=none&title=&width=251)拖到图表来创建的。
<a name="TQgH7"></a>
## 角色蓝图
新建一个蓝图类，父类为角色<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615625351811-731fa83f-a4ec-4053-826c-86699f263070.png#averageHue=%234a4a4a&height=445&id=b0jUE&originHeight=445&originWidth=540&originalType=binary&ratio=1&rotation=0&showTitle=false&size=72593&status=done&style=none&title=&width=540)<br />在蓝图中导入角色模型，调节胶囊体的大小使胶囊体大小来匹配角色，调节角色模型的方向来匹配胶囊体，因为胶囊体本身自带pawn模板的碰撞预设，所以将模型的碰撞预设改为NoCollision。在蓝图视口右面动画里调节如图所示，来使用之前创建好的动画蓝图。![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615625507086-69dce2ec-5aa9-4f78-bd4d-8a4c86995c82.png#averageHue=%234c4c4c&height=128&id=QhDV2&originHeight=128&originWidth=458&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9754&status=done&style=none&title=&width=458)<br />创建这两个组件![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632023400-e23049e1-acd7-4ce2-b11c-f9b0bfaf661d.png#averageHue=%23826a2b&height=45&id=Nili5&originHeight=45&originWidth=162&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2733&status=done&style=none&title=&width=162)弹簧臂移动到模型后方。弹簧臂属性设置勾选使用pawn控制旋转的作用是试弹簧臂跟随鼠标进行旋转![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632067826-edfdec9d-81af-46e3-8dc3-e5bc133aac90.png#averageHue=%23434040&height=150&id=JYiJP&originHeight=150&originWidth=256&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7692&status=done&style=none&title=&width=256)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632091115-967e07f7-60d8-4122-aaf1-6844a0b4755a.png#averageHue=%23585241&height=175&id=NqAQO&originHeight=175&originWidth=291&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14248&status=done&style=none&title=&width=291)的属性![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632109396-a07b56ee-c041-4bfd-bc17-2866b1e3e6c8.png#averageHue=%23464444&height=131&id=TpXvn&originHeight=131&originWidth=271&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8178&status=done&style=none&title=&width=271)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632126086-d0bc6a25-a388-4f7b-ad12-d8c90191fa73.png#averageHue=%235c5238&height=96&id=Uwucs&originHeight=96&originWidth=292&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8198&status=done&style=none&title=&width=292)的属性![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632154301-99fb7881-2724-435d-a1d3-26421ef850b7.png#averageHue=%234d4b4b&height=114&id=IA5sA&originHeight=114&originWidth=443&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11530&status=done&style=none&title=&width=443)<br />项目设置中的输入中的操作映射:![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632263645-635be495-51d3-4b54-919c-694e904f95c5.png#averageHue=%236c6c6c&height=409&id=x9uz5&originHeight=409&originWidth=536&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34995&status=done&style=none&title=&width=536)<br />LookUP中的缩放为-1.0个人认为应该是因为UE4使用的坐标轴是左手坐标系，向右移动鼠标是X轴正向对应的Y轴正向则是向下移动鼠标，因此LookUP的缩放调为-1.0.<br />操作映射中的命名对应的可以在蓝图中输入操作事件寻找到![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632772337-1bd7fda2-15dd-41a2-903f-f93cc20eda2e.png#averageHue=%23616060&height=118&id=r3mHa&originHeight=118&originWidth=410&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10670&status=done&style=none&title=&width=410)<br />轴映射中的命名对应的可以在蓝图中输入坐标轴事件中寻找到![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615632761979-253ab8b4-d933-4d0a-8103-a86f141b8044.png#averageHue=%23474747&height=191&id=nzlaY&originHeight=191&originWidth=411&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14103&status=done&style=none&title=&width=411)<br />事件图表：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615633553083-73f5b40e-465a-4116-88b4-bb3adb1d3fb3.png#averageHue=%234e4b49&height=619&id=HjAw1&originHeight=619&originWidth=600&originalType=binary&ratio=1&rotation=0&showTitle=false&size=142678&status=done&style=none&title=&width=600)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615633569535-5d36995e-506a-4817-9cb3-a500192ed777.png#averageHue=%23696868&height=565&id=Fku04&originHeight=565&originWidth=1053&originalType=binary&ratio=1&rotation=0&showTitle=false&size=210453&status=done&style=none&title=&width=1053)<br />创建一个蓝图类<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615633711907-235c8741-6fbb-4807-ab47-d651db2de89e.png#averageHue=%234a4a4a&height=442&id=zCDLi&originHeight=442&originWidth=544&originalType=binary&ratio=1&rotation=0&showTitle=false&size=73146&status=done&style=none&title=&width=544)<br />新创建的游戏模式基础中：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615633642494-7022e5b3-6af4-4511-9554-aadf6cb32771.png#averageHue=%23494848&height=442&id=apIxw&originHeight=442&originWidth=544&originalType=binary&ratio=1&rotation=0&showTitle=false&size=73280&status=done&style=none&title=&width=544)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615633681906-d25af82f-d896-4c67-a686-faf42ceb40c8.png#averageHue=%23504f4f&height=296&id=TC0qJ&originHeight=296&originWidth=406&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30832&status=done&style=none&title=&width=406)<br />类属性中的默认pawn类改为自己创建的角色蓝图，项目设置中的“地图和模式”中的默认游戏模式改为自己创建的游戏模式基础类即可使游戏中的角色使用角色蓝图中的设置<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615633802123-d51f6960-02f8-4087-bf82-2ed6dd12eb93.png#averageHue=%23403f3f&height=196&id=zvn90&originHeight=196&originWidth=889&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23868&status=done&style=none&title=&width=889)
<a name="vj90n"></a>
## 官方的详细的介绍如何设置人物运动
[https://docs.unrealengine.com/zh-CN/InteractiveExperiences/HowTo/CharacterMovement/index.html](https://docs.unrealengine.com/zh-CN/InteractiveExperiences/HowTo/CharacterMovement/index.html)
<a name="FwDzF"></a>
## 动画轨道的启用
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1621387425981-57d4c7a9-2f71-421c-9149-b36189eef93f.png#averageHue=%233d403c&clientId=udf1f7f8e-2c48-4&from=paste&height=363&id=uc34b967d&originHeight=363&originWidth=683&originalType=binary&ratio=1&rotation=0&showTitle=false&size=161279&status=done&style=none&taskId=udbfd489f-36f4-4050-abee-d489888268c&title=&width=683)在sequence中选择动画轨道，使角色有动作。
<a name="uryI5"></a>
## 在UE4中进行布料模拟
首先布料在导入的时候是需要骨骼的，需要选中![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392462972-bb9364ff-9f04-416b-bae4-8949e0b0f970.png#averageHue=%235b5b5b&clientId=uce2ddf78-b2e0-4&from=paste&height=92&id=u9f104a18&originHeight=92&originWidth=283&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13433&status=done&style=none&taskId=ua4808d98-38f2-49f2-94a9-d26c491fcb1&title=&width=283)。不需要导入动画。<br />第一步：将布料的物理栏中![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392531351-1f9df593-1b66-4f27-9498-629b336fe631.png#averageHue=%233f413d&clientId=uce2ddf78-b2e0-4&from=paste&height=81&id=uc5869ab7&originHeight=81&originWidth=270&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23829&status=done&style=none&taskId=u40144062-4e97-4add-887b-d329431d3c1&title=&width=270)的碰撞体移动到其他位置，![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392563469-c8eb9f9e-8efd-46fa-a5a4-5a47a5487542.png#averageHue=%2370735f&clientId=uce2ddf78-b2e0-4&from=paste&height=550&id=u39a49f22&originHeight=550&originWidth=651&originalType=binary&ratio=1&rotation=0&showTitle=false&size=304668&status=done&style=none&taskId=ufc03a6dd-eb06-4554-a04d-af88e608697&title=&width=651)<br />在网格体一栏中![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392590459-91695e25-1f61-4892-8004-c1e800145a4e.png#averageHue=%23565249&clientId=uce2ddf78-b2e0-4&from=paste&height=70&id=u01948b43&originHeight=70&originWidth=253&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20480&status=done&style=none&taskId=u4e48150a-912b-49cf-b05f-36247c7d627&title=&width=253)使用片段选择![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392580227-1256a7cc-92aa-4172-8ae0-03e4aeb4d5cf.png#averageHue=%239c6e34&clientId=uce2ddf78-b2e0-4&from=paste&height=99&id=u949c9863&originHeight=99&originWidth=477&originalType=binary&ratio=1&rotation=0&showTitle=false&size=58026&status=done&style=none&taskId=ufb33b485-b879-4faa-ad0a-25182c80edf&title=&width=477)，选择布料，鼠标右键![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392613463-cf46d75c-5c6c-4e45-a656-65bd0fb9bcd3.png#averageHue=%235f2f1c&clientId=uce2ddf78-b2e0-4&from=paste&height=324&id=u927e9da4&originHeight=324&originWidth=570&originalType=binary&ratio=1&rotation=0&showTitle=false&size=182977&status=done&style=none&taskId=uade32625-06af-4bc4-9866-5fdadc98ba6&title=&width=570)<br />此时会出现一个布料窗口![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392663913-e916a3c4-8646-40a6-862e-822a9886210e.png#averageHue=%23424241&clientId=uce2ddf78-b2e0-4&from=paste&height=94&id=u7ea763ca&originHeight=94&originWidth=390&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23729&status=done&style=none&taskId=ud09c7b87-9548-405c-9a61-8b8866a70ad&title=&width=390)<br />再次在布料位置按鼠标右键，应用布料数据![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392637858-814f50a6-bf78-4f63-bfef-688af3551cc7.png#averageHue=%23707370&clientId=uce2ddf78-b2e0-4&from=paste&height=253&id=u8f78309d&originHeight=253&originWidth=459&originalType=binary&ratio=1&rotation=0&showTitle=false&size=157162&status=done&style=none&taskId=u4e28b63a-faa9-419d-aa55-d0a13cf09b9&title=&width=459)<br />选择布料数据![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392701276-fbe41e8e-6d4a-4c41-ade9-50d79db1b620.png#averageHue=%236d6a67&clientId=uce2ddf78-b2e0-4&from=paste&height=60&id=uaba4ea62&originHeight=60&originWidth=255&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13085&status=done&style=none&taskId=ub27e5bc6-6e80-400e-b021-f888bb8926c&title=&width=255)并	启用布料绘制![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392732238-6875c75c-1622-41b6-abae-2448331ca65e.png#averageHue=%23b67626&clientId=uce2ddf78-b2e0-4&from=paste&height=114&id=ue472f69d&originHeight=114&originWidth=306&originalType=binary&ratio=1&rotation=0&showTitle=false&size=45447&status=done&style=none&taskId=u6f506d37-dc48-4213-af15-68fa0a9e516&title=&width=306)其中paint Value为100时![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392786068-765b813e-59ab-457d-8cc4-d448f7e3121b.png#averageHue=%23504f4f&clientId=uce2ddf78-b2e0-4&from=paste&height=221&id=ud2477192&originHeight=221&originWidth=261&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23141&status=done&style=none&taskId=ufc2a8a67-f6a1-4265-a12a-1782791753c&title=&width=261)绘制出来的区域是激活布料模拟的，Paint value 为0时绘制出来的区域是不激活布料模拟的。![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623392920477-ab820f75-cd43-4382-a375-9dbdb8fbd381.png#averageHue=%23a19c7a&clientId=uce2ddf78-b2e0-4&from=paste&height=779&id=u1ff747cd&originHeight=779&originWidth=681&originalType=binary&ratio=1&rotation=0&showTitle=false&size=222062&status=done&style=none&taskId=u9bc3bbb1-3908-41c9-a1e7-ff42264fe3c&title=&width=681)其中紫色区域是不激活布料物理模拟（是处于固定的状态），白色是激活。<br />绘制好保存后，在场景中加一个Wind 可以模拟出布料飘动的效果
<a name="hn1Vx"></a>
## 影片渲染队列（MRQ,Movie Render Queue）
4.25版本：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1625644722731-f998bb61-c5f3-49bb-b234-94861da9540d.png#averageHue=%234e4e43&clientId=u3554465d-f9aa-4&from=paste&height=117&id=u33038160&originHeight=117&originWidth=303&originalType=binary&ratio=1&rotation=0&showTitle=false&size=67657&status=done&style=none&taskId=ub3cf7309-927f-43a6-b1de-277570647a3&title=&width=303)<br />4.26版本需要在插件中手动打开![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635668910398-5d153750-c83b-4ce4-a4a5-601aefc297a6.png#averageHue=%23433f3e&clientId=ub694551b-85fe-4&from=paste&height=157&id=u62fab3a8&originHeight=157&originWidth=752&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20441&status=done&style=none&taskId=u862f47bb-b9b5-4dcc-83d6-5069f836520&title=&width=752)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635669655361-11af9979-19e4-496a-8291-3fa249a57fd8.png#averageHue=%232f2e2e&clientId=ub694551b-85fe-4&from=paste&height=610&id=u79804a76&originHeight=610&originWidth=1010&originalType=binary&ratio=1&rotation=0&showTitle=false&size=80588&status=done&style=none&taskId=u13d6a22f-4a68-436e-93f3-486a422c637&title=&width=1010)<br />其中渲染（本地与远程）的区别:<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635670434088-268c173f-df1e-4dcc-9412-180b4914798d.png#averageHue=%23131313&clientId=ub694551b-85fe-4&from=paste&height=389&id=u9465ccae&originHeight=389&originWidth=525&originalType=binary&ratio=1&rotation=0&showTitle=false&size=86702&status=done&style=none&taskId=ub5e105f9-33f7-4c0b-8003-a0255ccaecc&title=&width=525)
<a name="Mkvhe"></a>
### 渲染输出视频设置
渲染输出视频的尺寸应该是目标尺寸的1.5\~2倍的大小，例如 如果要目标是3840*2160的视频,那么输出的视频尺寸大小就应该是7680*4320的尺寸。最后在视频剪辑软件中再将视频压缩到目标大小。并且如果渲染输出尺寸和摄影机尺寸不一样的话，MRQ会根据目标渲染输出尺寸来进行渲染输出，但是Sequence是根据摄影机画面尺寸渲染输出。
<a name="nObCO"></a>
### 抗锯齿的设置：
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635672394574-1006b4d0-4c5e-428a-8e5f-60c7095a5c8c.png#averageHue=%23191818&clientId=ub694551b-85fe-4&from=paste&height=166&id=u17343b87&originHeight=166&originWidth=736&originalType=binary&ratio=1&rotation=0&showTitle=false&size=104030&status=done&style=none&taskId=u30cb3fd6-6066-497e-8a74-4227f5b68c1&title=&width=736)<br />如果提高采样数值后提示![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635672122186-3c1aea19-247e-4b39-91d3-0f43e18069ae.png#averageHue=%23444444&clientId=ub694551b-85fe-4&from=paste&height=46&id=uc0d3e8ec&originHeight=46&originWidth=468&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8823&status=done&style=none&taskId=ua3017bc0-57ac-4d4e-888e-2e4433f3484&title=&width=468)那么就勾选![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635672133711-d3dfffc9-fc9e-469b-b467-51bf4b245ec1.png#averageHue=%234e4d4d&clientId=ub694551b-85fe-4&from=paste&height=165&id=ua4d8cbe5&originHeight=165&originWidth=403&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14088&status=done&style=none&taskId=u5af2988e-fdb9-4a04-852e-73fe48daa4f&title=&width=403)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635672154667-1ba84219-6416-472b-a939-2cd16d5aef47.png#averageHue=%23393939&clientId=ub694551b-85fe-4&from=paste&height=634&id=u43a04bba&originHeight=634&originWidth=710&originalType=binary&ratio=1&rotation=0&showTitle=false&size=103216&status=done&style=none&taskId=u12614be1-fe90-4f9a-b228-dbf473885c7&title=&width=710)<br />其中 anti aliasing method 翻译是抗锯齿方法，![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635673016416-02661fb3-1c8b-401f-a834-c548e5de9889.png#averageHue=%235f5845&clientId=ub694551b-85fe-4&from=paste&height=82&id=u7671959f&originHeight=82&originWidth=131&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3139&status=done&style=none&taskId=u00fc8cdc-ab76-4971-8b9a-7d1acaf82f9&title=&width=131)选择无并不代表影片中就没有抗锯齿了，这个属性的意思是是否在原来的基础之上再添加一个采样方法,一般选择无就可以了，不推荐FXAA，FXAA的效果并不是很理想。一般要是选择的话就选择临时AA（TAA）<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635672235416-84d08b58-dedd-42fc-9dd1-448fa55172f0.png#averageHue=%23868e6f&clientId=ub694551b-85fe-4&from=paste&height=572&id=u1e389f47&originHeight=572&originWidth=1310&originalType=binary&ratio=1&rotation=0&showTitle=false&size=935045&status=done&style=none&taskId=u087865d3-63f2-4b4b-aa37-ac7ff8577c0&title=&width=1310)游戏重载（覆盖）的设置：<br />如果渲染输出的视频出现了mipmap的问题,那么就在游戏重载中找到并选择![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635670786158-468dd2d4-1d3a-4ccd-8a4f-8699bf6f1ab0.png#averageHue=%234c4a4a&clientId=ub694551b-85fe-4&from=paste&height=200&id=uef94a7fd&originHeight=200&originWidth=662&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23817&status=done&style=none&taskId=u1f537005-46b3-486d-94fc-bf6183be5f8&title=&width=662)<br />并确认勾选了Use LODZero。
<a name="pkAvM"></a>
### 高分辨率渲染
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635680313825-49341536-ca40-4074-8d5f-17fe9b3e68ff.png#averageHue=%234b4b4b&clientId=ub694551b-85fe-4&from=paste&height=202&id=ub8529881&originHeight=202&originWidth=373&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14488&status=done&style=none&taskId=u8e1962c4-697f-4db0-bc96-d2dd4b760c2&title=&width=373)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635680362639-d4dd502c-7766-42c9-927a-9db96e52d9f0.png#averageHue=%234d4d4d&clientId=ub694551b-85fe-4&from=paste&height=206&id=u532c74c2&originHeight=206&originWidth=373&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26718&status=done&style=none&taskId=u4769c3cc-5df9-4a7c-a34e-8a660a37daf&title=&width=373)<br />其中瓦片数量控制的是渲染多少个图块，并且是按照瓦片数量平方的数值来决定渲染图块数量，例如瓦片数量为2时将渲染4个图块。<br />重叠比率控制的是每个图块的重叠面积，数值为0.1时意思就是有10%的重叠面积。如果重叠比率为0，那么渲染出来的影片或者是图片会产生接缝，这个接缝在不放大时可能看不出来，但是放大后就会非常明显。例如：<br />重叠比率为0时：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635681686605-45a7b805-fb0e-4432-8bb3-1724ad463c7d.png#averageHue=%236a7b84&clientId=ub694551b-85fe-4&from=paste&height=795&id=ud74c0bf5&originHeight=795&originWidth=1286&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1437607&status=done&style=none&taskId=u530524b5-a6df-46db-bb94-e695cb0637d&title=&width=1286)重叠比率为30%时：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635681741054-85cdea5c-71ec-4b4b-b34d-a2536673b948.png#averageHue=%23697a83&clientId=ub694551b-85fe-4&from=paste&height=790&id=u1488e640&originHeight=790&originWidth=1285&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1442968&status=done&style=none&taskId=u32de095c-e249-4b21-b7fc-1344016258b&title=&width=1285)<br />不同的工程所需要的重叠比率是不同的，因此输出影片时建议先输出单帧观察<br />刚开始不设置其他的参数应该会出现这个警告![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635680794329-9ff9cb43-7ce2-4270-a31f-7fdc95871de6.png#averageHue=%23545353&clientId=ub694551b-85fe-4&from=paste&height=120&id=u218b6557&originHeight=120&originWidth=465&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29991&status=done&style=none&taskId=u0f7e1964-fe6d-44f2-8fc2-be4eb26d9cf&title=&width=465)<br />解决办法是不使用后处理体积的曝光设置，而是将输出视频所使用的摄影机中的![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635681212708-e972ee81-db7b-4ab8-ac09-53cc30544a62.png#averageHue=%23434343&clientId=ub694551b-85fe-4&from=paste&height=284&id=ue68f0df0&originHeight=284&originWidth=349&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17699&status=done&style=none&taskId=u87619216-6864-4085-91bc-2037f3341e2&title=&width=349)计量模式改为手动，改为手动后又两种调整曝光的方法，一个是找到camera调整这些参数![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635681266713-2241e168-c87b-435d-9fcd-396fb1827c4d.png#averageHue=%234e4d4c&clientId=ub694551b-85fe-4&from=paste&height=324&id=uc94781f2&originHeight=324&originWidth=344&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21803&status=done&style=none&taskId=u15bb6f88-b89c-4a70-919e-9edfdefac64&title=&width=344)，另一种方法是直接调整![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635681304446-65f562f4-4385-45da-83ac-acffef836900.png#averageHue=%234a4a4a&clientId=ub694551b-85fe-4&from=paste&height=241&id=u4ca70e5e&originHeight=241&originWidth=296&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14444&status=done&style=none&taskId=ue9fa43a6-945d-46b2-a45e-ee3190a676d&title=&width=296)曝光补偿的数值<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635681894860-d9545c88-bc48-4fb4-9065-2a7b903ada0d.png#averageHue=%23131212&clientId=ub694551b-85fe-4&from=paste&height=316&id=u7fe41054&originHeight=316&originWidth=1458&originalType=binary&ratio=1&rotation=0&showTitle=false&size=195040&status=done&style=none&taskId=u63306234-a93f-426b-9f30-79b3e5c3116&title=&width=1458)
<a name="pkQAD"></a>
### 透明通道输出
要实现透明通道输出就需要先将项目设置中的渲染模块中的![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635688497092-a8b8235d-933d-4d11-a2aa-f0e1016ca52d.png#averageHue=%23464646&clientId=ub694551b-85fe-4&from=paste&height=153&id=u315a4a9d&originHeight=153&originWidth=554&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16208&status=done&style=none&taskId=u41091537-d423-4e31-aae0-39a8f59af3c&title=&width=554)。<br />然后在MRQ输出PNG或者EXR时勾选输出透明度。<br />输出透明通道的结果：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636636228768-64fe5bf7-f270-4ee6-bfe1-350f9bdf04b8.png#averageHue=%23040404&clientId=u1c351bfa-9cc0-4&from=paste&height=366&id=uba304ac1&originHeight=366&originWidth=645&originalType=binary&ratio=1&rotation=0&showTitle=false&size=95165&status=done&style=none&taskId=u1f06c99c-e09b-4e30-8d10-f1d6a919c34&title=&width=645)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636636238570-f2b2d7c5-c10d-4a8b-a946-e932593c3c23.png#averageHue=%23d9d9d9&clientId=u1c351bfa-9cc0-4&from=paste&height=619&id=u3b5c1e11&originHeight=619&originWidth=1357&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1057146&status=done&style=none&taskId=u96279b77-32eb-4c6c-b1cc-50c6817c3a4&title=&width=1357)
<a name="TUhMg"></a>
## Sequence
<a name="ne0Cu"></a>
### 渐入渐出
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1633327556613-8856d2cd-0a57-4c73-b73a-6774bbf85327.png#averageHue=%23594a38&clientId=uab6e40ab-e77a-4&from=paste&height=165&id=u7a428c95&originHeight=165&originWidth=405&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41667&status=done&style=none&taskId=u58008f2b-4a2b-4bc9-b824-677a65cf6e9&title=&width=405)添加Fade 然后调整Fade的数值。
<a name="puA2g"></a>
### 渲染的设置

最后渲染影片时在渲染设置中![image.png](https://cdn.nlark.com/yuque/0/2020/png/2623605/1605011183285-b10a2be9-37f8-4c6f-8759-32a52b59e908.png#averageHue=%234c4b4b&height=269&id=bLHTE&originHeight=269&originWidth=329&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16739&status=done&style=none&title=&width=329)设置一下。在后期处理体积的细节面板增大屏幕百分比<br />![image.png](https://cdn.nlark.com/yuque/0/2020/png/2623605/1605513552041-f1221ee5-946d-4c95-a0d8-d02a71a329e5.png#averageHue=%234c4c4c&height=59&id=CxhuW&originHeight=59&originWidth=281&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8362&status=done&style=none&title=&width=281)，可以输出更高质量的视频。<br />反射球可以先拉一个大范围的，然后再小范围拖动到金属物体的影响金属。<br />如果反射效果不好时，可以将反射的分辨率调高，在项目设置中的正在渲染，反射采集分辨率调节。
<a name="sg4BG"></a>
### sequence快捷键
s键是K帧的快捷键，选中一个没有添加到关卡序列的物体按s键可以快速的将物体添加到关卡序列中<br />选中关键帧按1，2，3，4，5可以快速更改为![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1621742645834-128437b2-8a33-423d-8e56-8c65f6f3a91f.png#averageHue=%23282727&clientId=ud9770c81-49b5-4&from=paste&height=128&id=iQjui&originHeight=128&originWidth=145&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7322&status=done&style=none&taskId=u7c0dff5c-0fc8-4702-836a-698d2e4cc08&title=&width=145)


<a name="hxX7x"></a>
# [官方培训]08-UE动画基础
<a name="DJ4qv"></a>
## UE动画概述
<a name="K1cxL"></a>
### 影视CG相关常见动画种类浏览
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666762138411-e03bb7fc-aea3-4d47-aaad-938e565b5026.png#averageHue=%230c0b08&clientId=u7f0c56e4-b48f-4&from=paste&height=1076&id=u1a391ad2&originHeight=968&originWidth=1258&originalType=binary&ratio=1&rotation=0&showTitle=false&size=381504&status=done&style=none&taskId=u711f80c6-68d6-4cfc-9342-be712c38e12&title=&width=1397.7778148062446)
<a name="JhroQ"></a>
#### 骨骼网格体动画
骨骼动画是通过骨骼位置和蒙皮信息带动骨骼网格体的顶点位置从而实现动画效果的一种方式
<a name="xx4dm"></a>
##### 变形目标
变形目标也就是maya中的blendshape，是通过在不同的模型顶点形态之间进行插值，结合动画曲线来实现形变动画的一种方式，通常用来制作角色身体和面部肌肉的变形动画<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666762483402-ec3dc12f-04ec-47f4-b819-4cd14c7b701c.png#averageHue=%233e3e36&clientId=u7f0c56e4-b48f-4&from=paste&height=1022&id=uc5115a91&originHeight=920&originWidth=1687&originalType=binary&ratio=1&rotation=0&showTitle=false&size=748879&status=done&style=none&taskId=u72747f96-79a1-48b0-8acb-f5688215e48&title=&width=1874.444494100266)
<a name="KQWtb"></a>
##### 动画曲线
动画曲线是指在动画序列中通过某些属性来实现多种动画数据统一变化的一种方式，曲线有三种类型，分别是目标变形曲线，属性曲线和材质曲线![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666762660686-b29a3269-bd9d-47a7-aae2-547c3c2bad7a.png#averageHue=%23655b48&clientId=u7f0c56e4-b48f-4&from=paste&height=1003&id=u3caf6954&originHeight=903&originWidth=1689&originalType=binary&ratio=1&rotation=0&showTitle=false&size=805522&status=done&style=none&taskId=u3808c262-fc6a-4528-a2aa-398a190c9d8&title=&width=1876.666716381357)<br />可以在DCC软件中添加需要的属性并制作关键帧来制作属性曲线![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666762805094-e35ca1f6-590f-43d0-99ff-47209cab90c3.png#averageHue=%235c5958&clientId=u7f0c56e4-b48f-4&from=paste&height=651&id=ua571acaa&originHeight=586&originWidth=307&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19086&status=done&style=none&taskId=u4ed094e5-eeba-4616-b542-0e74e61f352&title=&width=341.1111201474698)，通过fbx导入UE![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666762923294-0a1be249-d11f-49ee-b53b-6abf4803369f.png#averageHue=%23272727&clientId=u7f0c56e4-b48f-4&from=paste&height=788&id=udc0ec4e3&originHeight=709&originWidth=369&originalType=binary&ratio=1&rotation=0&showTitle=false&size=144462&status=done&style=none&taskId=u8668202e-5da6-4a6f-85f9-c938d1bc1c0&title=&width=410.0000108612911)
<a name="MLjum"></a>
##### 姿势资产（pose asset）
可以将包含多种曲线的动画序列逐帧转化为一组pose，通过在例如动画蓝图中输入数据的方式来驱动pose，实现基于曲线的动画效果。例如可以在DCC软件中制作好一段包含骨骼运动，变形目标变化和自定义材质曲线的动画，每一帧代表一个pose，将骨骼网格和动画导入UE后得到一段同时驱动骨骼，变形目标和材质曲线的动画序列，然后基于这些动画序列创建一个姿势资产并通过手动或批量复制的方式修改每个pose的名称，就可以在动画蓝图中通过驱动pose得到动画效果，目前主要用于驱动角色面部动画。
<a name="Mk4bz"></a>
#### 物理动画
物理动画是通过实时的物理模拟实现刚体布料破碎毛发等实时的物理模拟效果
<a name="vqPTW"></a>
#### 定点动画缓存
也就是通过在DCC软件中导出abc格式的动画缓存，然后导入UE来播放
<a name="LAk5i"></a>
#### 顶点材质动画（世界顶点偏移）
通过材质中的世界位置位移节点，配合UV信息的变化来表现例如植被水面环境布料等动态规律明显的几何形变动画效果。
<a name="o5CyP"></a>
#### 毛发GroomCache动画
可以将外部预解算的groom毛发动画通过abc格式导入到引擎中，在UE中运行（play）之后就可以看到动画效果。
<a name="QRzbB"></a>
#### 时间轴动画（sequencer动画）
在虚幻引擎的编辑器中通过直接修改场景对象属性，尤其是transform属性来生成的动画效果。UE也支持从DCC软件中导入时间轴动画数据，支持单个或批量导入，从DCC软件中制作带有动画的模型，然后用fbx格式导出，接着在时间轴面板中进行导入，导入后会自动根据名字一 一对应将动画数据进行匹配。![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666764891732-49f4b847-a751-41a2-bee1-e3e2170b1600.png#averageHue=%23a29991&clientId=u7f0c56e4-b48f-4&from=paste&height=508&id=ufd8bc509&originHeight=457&originWidth=546&originalType=binary&ratio=1&rotation=0&showTitle=false&size=145074&status=done&style=none&taskId=u8ef5558c-7ddc-4899-86db-596791fe96f&title=&width=606.6666827378453)
<a name="AVYB7"></a>
#### 时间轴相机动画
跟时间轴动画操作一致，也是根据名字一一对应，不同的是，时间轴相机动画可以将焦距光圈等相机专用的属性动画导入。
<a name="ERk6U"></a>
#### 时间轴控制绑定动画control rig
control rig 是虚幻引擎的实时绑定系统，除了可以在sequencer上手动创作控制器动画之外，现在还可以导入外部DCC中的控制器，时间轴动画数据。
<a name="nRX76"></a>
### 骨骼动画系统
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666765384572-a2b0e128-99c2-47ce-9776-28ca6d1c6a3b.png#averageHue=%230d0a07&clientId=u7f0c56e4-b48f-4&from=paste&height=594&id=uc2a101ca&originHeight=535&originWidth=428&originalType=binary&ratio=1&rotation=0&showTitle=false&size=92070&status=done&style=none&taskId=ud6d0681f-831e-4544-b199-cc3702f33c8&title=&width=475.55556815347586)
<a name="szx3H"></a>
#### DCC动画制作要求
UE对于动画资产兼容性很强，唯一需要注意的是同一套骨架内的骨骼名称不能相同，否则会报错
<a name="rMYE5"></a>
#### 动画导入\导出
选中几何体和骨骼，导出FBX，需要勾选动画<br />导入时确保勾选导入动画![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666765615792-823e9503-966c-479c-ba24-1b359ff606a0.png#averageHue=%23282827&clientId=u7f0c56e4-b48f-4&from=paste&height=97&id=u0b4571d5&originHeight=87&originWidth=301&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10219&status=done&style=none&taskId=u5730a025-516e-4485-9ed0-c696a64ac89&title=&width=334.4444533041968)<br />**注意点：** 系统单位：厘米，尽量不要在制作过程中修改系统单位。<br />导出时动画的帧范围设置成动画数据的范围，而不是时间轴的范围，因为默认导入是以时间轴范围导入的，可以通过在UE中更改动画长度为带动画的时间![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666765898335-8237cf85-bba7-411b-abd6-2b99c6f0e7b2.png#averageHue=%232c2c2c&clientId=u7f0c56e4-b48f-4&from=paste&height=170&id=ucd6e6913&originHeight=153&originWidth=531&originalType=binary&ratio=1&rotation=0&showTitle=false&size=44086&status=done&style=none&taskId=u26287cb7-8809-4fc3-8937-d4834f8416c&title=&width=590.0000156296628)然后重新导入动画来修复![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666765934319-20045651-1426-4c57-bc7e-b1e62754a42f.png#averageHue=%233a3737&clientId=u7f0c56e4-b48f-4&from=paste&height=124&id=u6971dc49&originHeight=112&originWidth=528&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26416&status=done&style=none&taskId=ucfd69f7f-b3f6-4ae6-94b0-9afe343ac00&title=&width=586.6666822080263)。<br />从UE导出的FBX动画文件，再导入至DCC软件中时需要确保![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666766027159-147b17ab-fe6e-4fb9-950b-500d52d9f443.png#averageHue=%234c4949&clientId=u7f0c56e4-b48f-4&from=paste&height=142&id=uf8c6e832&originHeight=128&originWidth=390&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11476&status=done&style=none&taskId=u5f23d64d-fcd3-471f-8681-8b584659df6&title=&width=433.3333448127467)
<a name="ap99e"></a>
#### 动画重定向
是指将针对某个角色制作的动画数据适配到另一个角色身上。<br />UE5中进行了大幅增强，支持通过实时IK绑定提高动画重定向的效果，同时支持在不同结构或命名的骨架之间进行动画重定向。
<a name="AIWjC"></a>
#### livelink
livelinke是虚幻引擎的动画插件，可以用于从maya中将动画数据实时传输到虚幻引擎也可以通过移动设备进行面部实时动捕。
<a name="N9V3P"></a>
#### control rig
实时绑定系统，可以使我们在虚幻引擎中创作骨骼动画，同时支持IKFK多种绑定模式，并且可以在控制绑定编辑器中通过图形脚本自定义绑定规则
<a name="mNnHt"></a>
## CG项目中的动画环节
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666769067727-b2ad1799-9f3b-421d-84d4-51476b63f82b.png#averageHue=%230b0908&clientId=u7f0c56e4-b48f-4&from=paste&height=420&id=u9e404cf2&originHeight=378&originWidth=815&originalType=binary&ratio=1&rotation=0&showTitle=false&size=101931&status=done&style=none&taskId=ud59f1637-29db-4234-a110-39d34a9ec89&title=&width=905.5555795445861)
<a name="J881m"></a>
### 如何确保骨骼动画数据保真度
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666769158021-ec5c7470-cdb5-4ac5-a93a-81918235669e.png#averageHue=%230c0a09&clientId=u7f0c56e4-b48f-4&from=paste&height=726&id=uc143eb01&originHeight=653&originWidth=869&originalType=binary&ratio=1&rotation=0&showTitle=false&size=229941&status=done&style=none&taskId=u4b7a23ad-539b-4632-a1b8-f61d7ccf2ba&title=&width=965.5555811340433)
<a name="DkW0z"></a>
#### maya关节方向导致的数据显示差异
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666769395476-ded51ff6-fc61-44b9-90c4-36ecbba078d7.png#averageHue=%23474747&clientId=u7f0c56e4-b48f-4&from=paste&height=307&id=u91387983&originHeight=276&originWidth=394&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29218&status=done&style=none&taskId=ucb44889d-5f42-4236-b119-dac67a5a4f4&title=&width=437.7777893749287)需要归零后再蒙皮
<a name="Hbt8K"></a>
#### 坐标系转换导致精度的误差
需要使用Z轴为上方向轴<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666769513652-7de6938a-5bd9-4fbd-a599-64f56aa8fa97.png#averageHue=%234f4f4f&clientId=u7f0c56e4-b48f-4&from=paste&height=557&id=u4a5c6bd3&originHeight=501&originWidth=692&originalType=binary&ratio=1&rotation=0&showTitle=false&size=66491&status=done&style=none&taskId=uc6feb56b-ce83-44d1-ad26-f19026ca7e3&title=&width=768.888909257489)
<a name="qnK29"></a>
#### 帧率差异导致动画长度不同
原因：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666769834557-4d5b88dc-1a73-424c-8e96-84e78f8352e0.png#averageHue=%231e1b1b&clientId=u7f0c56e4-b48f-4&from=paste&height=962&id=u9d1179df&originHeight=866&originWidth=1666&originalType=binary&ratio=1&rotation=0&showTitle=false&size=204004&status=done&style=none&taskId=u8ded461a-04bd-4b55-9529-9ca038124ce&title=&width=1851.1111601488103)<br />解决办法：从第0帧开始K动画
<a name="rvHqW"></a>
#### Maya数据显示精度问题
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666771977438-183455d4-7fce-4865-83e9-cf9c38d22cbc.png#averageHue=%234a4a4a&clientId=u7f0c56e4-b48f-4&from=paste&height=972&id=u876d6a34&originHeight=875&originWidth=566&originalType=binary&ratio=1&rotation=0&showTitle=false&size=136505&status=done&style=none&taskId=u0b120933-3bec-4264-8f18-caa72099d0b&title=&width=628.8889055487555)![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666772003630-ea178f61-ca97-4956-8521-c4c782905641.png#averageHue=%23696967&clientId=u7f0c56e4-b48f-4&from=paste&height=204&id=u7b5d2751&originHeight=184&originWidth=253&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20373&status=done&style=none&taskId=u84327710-a19c-441e-85d8-2cae9c7a108&title=&width=281.1111185580126)
<a name="elkxZ"></a>
#### maya动画曲线信息无法导出到UE，导致帧之间插值方式有差异
提高maya动画帧率和ue的动画采样率。
<a name="DzIAG"></a>
#### maya双精度浮点数和UE动画数据单精度浮点数的差异

![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666772258198-eefdfee9-ddf8-412e-9c3c-53b12656c551.png#averageHue=%238a8685&clientId=u7f0c56e4-b48f-4&from=paste&height=1442&id=u1332a5c0&originHeight=1298&originWidth=1430&originalType=binary&ratio=1&rotation=0&showTitle=false&size=555677&status=done&style=none&taskId=uf3525aa8-3e51-4f93-82ee-b81b446a5fc&title=&width=1588.8889309800713)
<a name="QzJsZ"></a>
#### 动画压缩导致高频信息丢失
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666772772716-35380c77-3bfe-46a0-8ed6-969b22ce70f9.png#averageHue=%232d2d2d&clientId=u7f0c56e4-b48f-4&from=paste&height=442&id=u1927cfc2&originHeight=398&originWidth=846&originalType=binary&ratio=1&rotation=0&showTitle=false&size=80051&status=done&style=none&taskId=ua17c82ce-837c-4407-ac0e-bfdbfb5b0a5&title=&width=940.0000249014967)<br />可以新建压缩设置，选择<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666772817069-cf58d109-8add-4e00-9cf8-7051ddada3ab.png#averageHue=%2343413c&clientId=u7f0c56e4-b48f-4&from=paste&height=326&id=ub6cf6988&originHeight=293&originWidth=618&originalType=binary&ratio=1&rotation=0&showTitle=false&size=110901&status=done&style=none&taskId=uf77065b1-2f86-4725-b3a3-f6477575cb8&title=&width=686.6666848571217)使用动画压缩破坏性最低的设置![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666772844008-38b67a1f-69ea-4438-b4d2-d43b258d1c52.png#averageHue=%23202020&clientId=u7f0c56e4-b48f-4&from=paste&height=412&id=ud0d63ebc&originHeight=371&originWidth=1420&originalType=binary&ratio=1&rotation=0&showTitle=false&size=47291&status=done&style=none&taskId=u530fcc13-6cf1-4142-b337-9a2cb97678b&title=&width=1577.7778195746162)<br />或者直接取消勾选允许去除帧。
<a name="ohBj8"></a>
#### 插值方式会改变动画形态
UE默认会根据帧与帧之间线性生成过度帧，如果想要动画是一帧一个变换形态，那么可以将插值选项改成跳过![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666772990114-168120c2-395d-4579-8f9c-f01689b21e73.png#averageHue=%23252525&clientId=u7f0c56e4-b48f-4&from=paste&height=159&id=u8d60779d&originHeight=143&originWidth=505&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25300&status=done&style=none&taskId=u28cd7ed8-d800-4fdd-ad9f-7fbf49f08d8&title=&width=561.1111259754797)。
<a name="nGeOc"></a>
#### 总结
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666773090276-9739d94d-b55f-4776-bfb6-ed6d1c93c76a.png#averageHue=%230a0907&clientId=u7f0c56e4-b48f-4&from=paste&height=889&id=ue0893cba&originHeight=800&originWidth=1548&originalType=binary&ratio=1&rotation=0&showTitle=false&size=378855&status=done&style=none&taskId=ufe169d8b-9d0e-4d17-a009-86996646e2e&title=&width=1720.0000455644408)
<a name="N0i37"></a>
### 如何选择动画实现方式
<a name="z8VEC"></a>
#### 离线渲染和实时渲染对动画方案的思路差异
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666773349534-9e9a7f31-51e9-4b3d-801e-b6d4910705c3.png#averageHue=%230b0805&clientId=u7f0c56e4-b48f-4&from=paste&height=1432&id=u11550b9a&originHeight=1289&originWidth=2478&originalType=binary&ratio=1&rotation=0&showTitle=false&size=733346&status=done&style=none&taskId=ud6a94598-fdf1-43cd-9bcd-e24e5c4ba34&title=&width=2753.33340627176)
<a name="aratD"></a>
#### CG项目动画方案设计示例
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666773992666-f94cff18-e70f-43cf-a263-fe14e48060de.png#averageHue=%230c0a07&clientId=u7f0c56e4-b48f-4&from=paste&height=1247&id=uc98532ad&originHeight=1122&originWidth=2279&originalType=binary&ratio=1&rotation=0&showTitle=false&size=659295&status=done&style=none&taskId=u659d033f-62e6-4480-a2cb-6477959250c&title=&width=2532.2222893032044)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774193818-4803e135-2dc4-42a2-90db-81d2fc771c19.png#averageHue=%2360725a&clientId=u7f0c56e4-b48f-4&from=paste&height=1020&id=uc5e16442&originHeight=918&originWidth=1686&originalType=binary&ratio=1&rotation=0&showTitle=false&size=484630&status=done&style=none&taskId=u1dd319f5-98df-40eb-ab7b-6e7d9ea84ca&title=&width=1873.3333829597204)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774208650-242f6f8a-4698-4d8f-80d6-b87f467027c2.png#averageHue=%2372776b&clientId=u7f0c56e4-b48f-4&from=paste&height=1001&id=ueb114dfc&originHeight=901&originWidth=1681&originalType=binary&ratio=1&rotation=0&showTitle=false&size=913562&status=done&style=none&taskId=uc8cbeb45-c21e-415d-893c-7f8aeeb9f8c&title=&width=1867.7778272569929)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774226478-4d1429f0-eba1-4347-b73c-86f3b0d53ea3.png#averageHue=%23353b26&clientId=u7f0c56e4-b48f-4&from=paste&height=1007&id=u19a24cca&originHeight=906&originWidth=1688&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1292650&status=done&style=none&taskId=u6b50114c-0953-437d-a674-70d7041df72&title=&width=1875.5556052408115)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774257477-36483c53-fffc-4380-a410-e75a65e2e2d2.png#averageHue=%235e5e57&clientId=u7f0c56e4-b48f-4&from=paste&height=1016&id=u5d73b3db&originHeight=914&originWidth=1646&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1088356&status=done&style=none&taskId=uc4b23130-430f-4be9-8e88-046c1ea2087&title=&width=1828.8889373379002)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774280792-efa44aa6-7271-42c5-86fc-14be937729f8.png#averageHue=%23646460&clientId=u7f0c56e4-b48f-4&from=paste&height=1002&id=u98b9270c&originHeight=902&originWidth=1695&originalType=binary&ratio=1&rotation=0&showTitle=false&size=848571&status=done&style=none&taskId=u4b404473-3424-41a2-adb1-841c4505ee4&title=&width=1883.3333832246299)
<a name="CSTWG"></a>
### 如何通过动画环节的快速迭代最大化实时流程的价值
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774323148-f75ae1a6-f173-478b-b984-bb3adbcede3f.png#averageHue=%230b0908&clientId=u7f0c56e4-b48f-4&from=paste&height=529&id=u45e8d676&originHeight=476&originWidth=899&originalType=binary&ratio=1&rotation=0&showTitle=false&size=140357&status=done&style=none&taskId=u73a2ca43-b2ac-44fe-970e-4714cc9f20d&title=&width=998.8889153504084)
<a name="UNQ4D"></a>
#### 通过原型+迭代的方式并行推进动画制作
先使用获得成本很低的资产，然后迭代资产最终输出。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774471648-f599d581-dc16-41cf-b295-60f48e3cefc1.png#averageHue=%23605446&clientId=u7f0c56e4-b48f-4&from=paste&height=1296&id=ubc3d289e&originHeight=1166&originWidth=2413&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1132398&status=done&style=none&taskId=u4c93e69c-8bab-4dcd-891e-bd950801e9b&title=&width=2681.111182136302)
<a name="Zbld3"></a>
#### 通过LiveLink实时浏览引擎内效果
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774545046-9ae16e25-9c21-41f0-8ea2-8b126da6800e.png#averageHue=%23080808&clientId=u7f0c56e4-b48f-4&from=paste&height=730&id=u020b7ffb&originHeight=657&originWidth=1403&originalType=binary&ratio=1&rotation=0&showTitle=false&size=197168&status=done&style=none&taskId=ud0c78c8d-2420-474d-aae6-8b938053807&title=&width=1558.8889301853426)
<a name="jywMk"></a>
#### 引擎内修改和创作动画
通过control rig 直接在引擎内制作动画，这种方式还能够避免maya与UE动画传输的失真。
<a name="stH3i"></a>
#### 引擎内实时动作捕捉
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774668592-037b185d-b285-47bb-a1cc-6a078cf7406e.png#averageHue=%230c0c0c&clientId=u7f0c56e4-b48f-4&from=paste&height=1450&id=u3d789abe&originHeight=1305&originWidth=2350&originalType=binary&ratio=1&rotation=0&showTitle=false&size=634534&status=done&style=none&taskId=u887bffc1-d18a-4171-b8e5-6328ea64ae7&title=&width=2611.111180281935)
<a name="yKWdb"></a>
## 动画案例简析
<a name="qUjz6"></a>
### Meerkat Demo 狐獴 案例工程动画技术分析
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666774853634-e9f09169-fcd7-4cd8-a6ce-6934874b82e7.png#averageHue=%230c0906&clientId=u7f0c56e4-b48f-4&from=paste&height=630&id=u479b54f8&originHeight=567&originWidth=843&originalType=binary&ratio=1&rotation=0&showTitle=false&size=179839&status=done&style=none&taskId=ue886ac1a-4c13-408c-ae66-49786d9a3bd&title=&width=936.6666914798602)
<a name="wXjIK"></a>
#### 动画方法分析和相关注意事项介绍
动画是只用了一个动画序列<br />两个角色的根骨骼都始终在原点并且没有动画，角色的位移都是由第二节骨节的位移动画带动<br />注意事项：<br />给角色骨骼网格体指定合适的物理资产<br />如果没有指定合适的物理资产，由于动画范围较大，很多镜头中骨骼网格体的原点到了镜头之外，出于优化目的，角色会被视为不需要渲染的物体而剔除<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666775529501-84554f9b-4dae-438e-b2fd-ee7b92b85a12.png#averageHue=%232b2b2b&clientId=u7f0c56e4-b48f-4&from=paste&height=240&id=u5172f1e3&originHeight=216&originWidth=688&originalType=binary&ratio=1&rotation=0&showTitle=false&size=42662&status=done&style=none&taskId=u64060eb3-c5c4-4b79-9142-89760bab711&title=&width=764.444464695307)<br />如果仅仅为了避免角色被剔除，可以在控制角色移动的骨骼上制作一个简单的物理体（需要匹配全身），![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666775843237-4be5263f-841d-4e1a-a6a7-04dfa1ee2d74.png#averageHue=%233d3a31&clientId=u7f0c56e4-b48f-4&from=paste&height=499&id=u4bd074a8&originHeight=449&originWidth=719&originalType=binary&ratio=1&rotation=0&showTitle=false&size=216773&status=done&style=none&taskId=udd0f86a3-312d-415e-93bb-d8bccc2df23&title=&width=798.8889100522176)


<a name="zgfe6"></a>
#### 把角色部件封装为蓝图
蓝图除了可以把骨骼网格毛发资产，服饰道具，特效等角色部件都封装到一起之外，还可以自定义一些函数变量把一些动画元素进行统一的调度。例如在sequencer中控制一个蓝图其中编写的少量事件或变量来批量设置一些东西，这样能够让sequencer轨道更加精简。角色蓝图也是同理。
<a name="Hoeme"></a>
#### 狐獴肢体骨骼动画和表情变形目标动画
在DCC软件中通过blendshape制作并作为曲线跟随骨骼动画数据一起导入到UE中，同时可以在动画序列编辑器中修改动画数值。
<a name="w1Ldq"></a>
#### LiveLink应用
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666776436008-0c38de6a-6c81-47aa-96d9-43933adeeb2f.png#averageHue=%235592ce&clientId=u7f0c56e4-b48f-4&from=paste&height=686&id=ua4cbd996&originHeight=617&originWidth=1788&originalType=binary&ratio=1&rotation=0&showTitle=false&size=955110&status=done&style=none&taskId=ub3c8aa49-a02f-4357-aadf-cdd8a6fe4ec&title=&width=1986.6667192953619)
<a name="Qzm6W"></a>
#### 基于ControlRig和动画模式的引擎内创作动画
在骨骼网格体中提供控制绑定资产![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666776501614-72a0a3a6-5496-4ac4-92af-3e873a6cdc77.png#averageHue=%23272727&clientId=u7f0c56e4-b48f-4&from=paste&height=239&id=ube09ed2f&originHeight=215&originWidth=712&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34482&status=done&style=none&taskId=u4c48d501-fb3e-4f44-9eb1-23c27f28920&title=&width=791.1111320683991)<br />在虚幻引擎中制作动画并烘焙成动画序列<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666776602026-f810029b-4ac4-4b46-95db-7e2a2b9cc624.png#averageHue=%23393a33&clientId=u7f0c56e4-b48f-4&from=paste&height=1337&id=ud77e7008&originHeight=1203&originWidth=1975&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1462499&status=done&style=none&taskId=u3a8e54a1-a7b8-4a60-ad80-3ee65d397cd&title=&width=2194.444502577371)![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666776624778-fb4bf275-5ec4-49ec-8566-b10f04d22e79.png#averageHue=%23302e2d&clientId=u7f0c56e4-b48f-4&from=paste&height=778&id=u28d41eca&originHeight=700&originWidth=789&originalType=binary&ratio=1&rotation=0&showTitle=false&size=296236&status=done&style=none&taskId=ua8d2fef5-21d4-473a-9787-47699bce13f&title=&width=876.666689890403)<br />针对已经有的动画序列资产可以通过烘焙到控制绑定进行二次编辑。如果没有控制绑定资产也可以通过以FK控制绑定进行编辑。这样就不需要导出到maya修改完再导回来。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666776721185-9d286fd7-5527-4c96-b62f-5bee3c64f7b7.png#averageHue=%23817d63&clientId=u7f0c56e4-b48f-4&from=paste&height=340&id=u93423e03&originHeight=306&originWidth=473&originalType=binary&ratio=1&rotation=0&showTitle=false&size=99552&status=done&style=none&taskId=ud2524f50-8ec8-4226-8d0c-38c4133e865&title=&width=525.5555694780236)
<a name="cu8GH"></a>
### Slay Animation Sample 案例工程动画技术分析
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666777052606-6443bdda-0284-4c5b-a549-e4046353ead7.png#averageHue=%230e0b08&clientId=u7f0c56e4-b48f-4&from=paste&height=649&id=u73861860&originHeight=584&originWidth=748&originalType=binary&ratio=1&rotation=0&showTitle=false&size=182557&status=done&style=none&taskId=ufb3f982a-b319-4802-b254-7723ce28952&title=&width=831.1111331280373)
<a name="frKlG"></a>
#### 按镜头划分动画序列资产的管理方式
主关卡序列<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666777889051-efb7745d-e706-4135-9af1-25290a2a2b07.png#averageHue=%23343434&clientId=u7f0c56e4-b48f-4&from=paste&height=377&id=u5866709b&originHeight=339&originWidth=1814&originalType=binary&ratio=1&rotation=0&showTitle=false&size=146150&status=done&style=none&taskId=ue5a66a0b-df99-4693-ad56-65362655949&title=&width=2015.5556089495449)![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666778253748-73ab5802-6a01-4169-834f-7f91a4cf5d56.png#averageHue=%2367523a&clientId=u7f0c56e4-b48f-4&from=paste&height=541&id=uf60641c7&originHeight=487&originWidth=323&originalType=binary&ratio=1&rotation=0&showTitle=false&size=92612&status=done&style=none&taskId=u839ae04b-ed20-41e2-8ebc-2686b500aff&title=&width=358.88889839619793)
<a name="TGqhS"></a>
#### 在角色蓝图中协同动画播放
通过设置总姿势组件来将角色动画和武器进行了关联<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666778346343-3dc010bb-0133-4af9-a640-25f4bc97b337.png#averageHue=%233f3121&clientId=u7f0c56e4-b48f-4&from=paste&height=453&id=ud1f0fffd&originHeight=408&originWidth=1083&originalType=binary&ratio=1&rotation=0&showTitle=false&size=187792&status=done&style=none&taskId=u2fdf5659-f96e-45c3-a498-fad9903bb53&title=&width=1203.3333652107813)
<a name="PqKOS"></a>
#### Sequnencer时间轴动画和骨骼动画结合应用
在骨骼动画的基础上又进行了位置信息的微调。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666778558140-a6c5522b-d932-42bd-b603-bb5a085cf543.png#averageHue=%2328493e&clientId=u7f0c56e4-b48f-4&from=paste&height=311&id=u48a5d06d&originHeight=280&originWidth=1803&originalType=binary&ratio=1&rotation=0&showTitle=false&size=99518&status=done&style=none&taskId=u472c2995-26ee-4c23-a9de-d641ee11ac1&title=&width=2003.3333864035444)
<a name="CFdCF"></a>
#### Addtive 表情动画和肢体动画结合应用
将骨骼动画和表情动画分开<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666778653427-dd33aaae-a519-4de4-9cab-34b4f03d147e.png#averageHue=%23303630&clientId=u7f0c56e4-b48f-4&from=paste&height=364&id=u16de53ff&originHeight=328&originWidth=1837&originalType=binary&ratio=1&rotation=0&showTitle=false&size=172946&status=done&style=none&taskId=u85c3d4e1-570f-44fe-9373-db6efb68d58&title=&width=2041.1111651820916)![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666778709250-8503e791-44f4-43b9-8237-4f9b479437d2.png#averageHue=%232d2d2c&clientId=u7f0c56e4-b48f-4&from=paste&height=311&id=u1d3295d7&originHeight=280&originWidth=567&originalType=binary&ratio=1&rotation=0&showTitle=false&size=54027&status=done&style=none&taskId=udbfacf3a-3fb5-408b-86e3-a12bc902a0e&title=&width=630.000016689301)
<a name="RT62d"></a>
#### 实时布料物理模拟动画的应用
布料模拟取决于物理资产的精细程度<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666778759391-1629d5b8-4811-4559-b5a1-86946bbde9ba.png#averageHue=%238e8a7e&clientId=u7f0c56e4-b48f-4&from=paste&height=1370&id=u7d33d242&originHeight=1233&originWidth=2502&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1607019&status=done&style=none&taskId=u850ce4ee-9528-4ecc-a6d6-c20506c19df&title=&width=2780.000073644852)

<a name="zOwkn"></a>
# 角色动画制作教程(旧教程，忽略了)
这个教程有点老了，17年的。<br />教程链接[https://www.bilibili.com/video/BV1Va4y1E7jQ?p=2&spm_id_from=pageDriver&vd_source=b1de3fe38e887eb40fc55a5485724480](https://www.bilibili.com/video/BV1Va4y1E7jQ?p=2&spm_id_from=pageDriver&vd_source=b1de3fe38e887eb40fc55a5485724480)
<a name="Ju7P4"></a>
## 准备角色导出
<a name="lnKDO"></a>
### 角色的属性查看

首先角色有且只有一个根骨骼，骨骼组织不能被破坏。<br />蒙皮的方法使用线性![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666754263119-89d2368c-45e1-40bd-9092-ebc3ae28d317.png#averageHue=%234b4949&clientId=u7f0c56e4-b48f-4&from=paste&height=351&id=u2d6cf9e8&originHeight=351&originWidth=726&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18810&status=done&style=none&taskId=u0f526ff5-e453-46d0-8065-8a11301f7c8&title=&width=726)
<a name="G5VxO"></a>
### 为角色添加blendshape
选中角色![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666755698031-9524d7ec-2b93-4311-be41-fb56bcb04033.png#averageHue=%237a7474&clientId=u7f0c56e4-b48f-4&from=paste&height=116&id=u22dba22b&originHeight=116&originWidth=329&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6215&status=done&style=none&taskId=u9d11b355-6fa9-4e84-9d07-0271d62382b&title=&width=329)添加blendshape，然后在shape editor中![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666755734919-004aa9ea-cb9b-41de-b1cd-2ed6b3933de7.png#averageHue=%23525050&clientId=u7f0c56e4-b48f-4&from=paste&height=319&id=ue101e01d&originHeight=319&originWidth=425&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24228&status=done&style=none&taskId=u4b06c6fb-5f3a-4050-ac55-b470d256dbc&title=&width=425)进行操作。<br />选中blendshape节点，右键添加目标![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666755754305-8447ab57-2d72-4954-b6d8-3c74ff1773bb.png#averageHue=%23b28462&clientId=u7f0c56e4-b48f-4&from=paste&height=45&id=u997a1ddb&originHeight=45&originWidth=230&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1980&status=done&style=none&taskId=u35ae9538-5184-4a14-b4e6-fb155555d1e&title=&width=230)，然后会自动进入编辑模式，正在编辑的目标会显示为红色，![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666755790632-01fa90ae-d652-4934-a540-43bdf7f1ba31.png#averageHue=%23a67953&clientId=u7f0c56e4-b48f-4&from=paste&height=129&id=uba493448&originHeight=129&originWidth=607&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8731&status=done&style=none&taskId=u730e500c-979f-4a14-9df5-84dae4768d5&title=&width=607)显示为红色时会记录针对角色进行的变换，变换完以后，点击edit即可。<br />目标节点右键可以使用duplicate target 复制，然后使用flip target 翻转目标，即可快速制作一个对称方向的目标节点。（也就是做了右边后使用此操作快速生成左边的）![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666755874202-9b19d9e0-541c-420b-8b57-78d342dc5a80.png#averageHue=%234f4e4e&clientId=u7f0c56e4-b48f-4&from=paste&height=403&id=u849596ff&originHeight=403&originWidth=395&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14541&status=done&style=none&taskId=ud87af53c-fe65-4c18-8974-ffd61a6f190&title=&width=395)，mirror target是镜像，镜像和翻转的区别是，镜像是再原来的基础上生成一个对称的，翻转是将现在移动到对称位置。
<a name="BVTsu"></a>
### 导出设置
以FBX格式导出，勾选平滑组![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666757047873-08f98dce-c52a-4e0c-b0e1-54a502883929.png#averageHue=%23515150&clientId=u7f0c56e4-b48f-4&from=paste&height=58&id=u16a9770a&originHeight=58&originWidth=422&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2048&status=done&style=none&taskId=u2f00fa10-c200-466c-85e4-fecbcec14a7&title=&width=422)，如果有动画的话就bake一下动画：![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666757080836-e18c46d6-ca5b-4b11-8db9-56703ca510cb.png#averageHue=%23484847&clientId=u7f0c56e4-b48f-4&from=paste&height=166&id=u59c859ce&originHeight=166&originWidth=485&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5531&status=done&style=none&taskId=ud54bb39e-42f4-4446-a1b0-063c1c6f833&title=&width=485)，如果模型有进行变形操作那么就勾选这些![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666757119253-e5df2a52-847c-46b2-b58f-957a934fa865.png#averageHue=%234a4a49&clientId=u7f0c56e4-b48f-4&from=paste&height=103&id=ub7ed4d78&originHeight=103&originWidth=324&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2864&status=done&style=none&taskId=u95818301-f36e-4dd0-af17-0d853e15e82&title=&width=324)，fbx版本用高版本就行，具体需要时去看虚幻官网的建议![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666757249631-b2bce30d-9a49-4598-ab52-33a94a0c61cf.png#averageHue=%23515050&clientId=u7f0c56e4-b48f-4&from=paste&height=101&id=u06cd5875&originHeight=101&originWidth=560&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5701&status=done&style=none&taskId=ud6b994f9-70c8-44e6-8671-ae763fde05a&title=&width=560)
<a name="mKgFB"></a>
## 导入角色到引擎
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666837540945-8181ae0f-64ff-4b77-afa5-ae5d0866623f.png#averageHue=%23434343&clientId=u1f668136-c0b9-4&from=paste&height=899&id=u289c643b&originHeight=809&originWidth=424&originalType=binary&ratio=1&rotation=0&showTitle=false&size=100620&status=done&style=none&taskId=uecf65043-3842-4736-ab22-a1abe05a424&title=&width=471.11112359129385)<br />带有变形目标的骨骼网格体使用的材质需要勾选使用变形目标，不勾选也行，当修改骨骼网格体的变形目标的参数时，编辑器会自动勾选，只需要保存一下材质即可。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1666840836191-aa84d054-388a-48fa-85b9-e161cfe2c38f.png#averageHue=%23868e83&clientId=u1f668136-c0b9-4&from=paste&height=389&id=ubb9f8084&originHeight=350&originWidth=539&originalType=binary&ratio=1&rotation=0&showTitle=false&size=147146&status=done&style=none&taskId=u670ffff3-8646-476c-b440-de6972d80f4&title=&width=598.8889047540268)<br />导入动画时，推荐勾选删除变形目标曲线。
<a name="O5gKt"></a>
## 相关知识点
[https://docs.unrealengine.com/5.0/zh-CN/skeletal-mesh-sockets-in-unreal-engine/](https://docs.unrealengine.com/5.0/zh-CN/skeletal-mesh-sockets-in-unreal-engine/)
<a name="C1u6m"></a>
# 【官方培训】17-UE角色动画
[[官方培训]17-UE角色动画 | Epic 戴浩军_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1m841177jW/?spm_id_from=333.999.0.0&vd_source=b1de3fe38e887eb40fc55a5485724480)
<a name="tgDyS"></a>
## 影视动画行业动画环节特点分析

- 角色动画数据量大，保真度要求高
- 目前较为依赖外部DCC
- 是品质打磨的重点环节，需要频繁修改
- 同时存在动作捕捉和手调动画的需求
- 通常涉及到角色相关资产的整合

<a name="WtfXd"></a>
## UE5角色动画相关工具和特性介绍
<a name="H5f1h"></a>
### 影视动画项目常用动画资产类型和动画概念
<a name="WxIef"></a>
#### 骨骼动画
用骨骼位置和蒙皮信息带动骨骼网格体的模型顶点位置，从而实现模型的动画效果。
<a name="WwUcU"></a>
#### 动画曲线
可以在引擎中读取，或者在动画编辑器中添加和编辑的动画曲线数据。有三种曲线：属性曲线，变形目标曲线，材质曲线。
<a name="P8W7h"></a>
#### 姿势资产
通过将动画拆分成不同的姿势并储存为一个资产，让我们可以通过动画曲线驱动姿势的方式来实现动画效果。在影视动画项目中，通常用于驱动角色的面部表情动画
<a name="qapkL"></a>
#### 变形目标
对应maya的blend shape。是通过在不同的模型顶点形态之间插值，结合动画曲线来实现形变动画的一种方式。通常用来表现角色身体和面部的姿势变形。
<a name="UEUA9"></a>
#### 物理动画
通过结合物理资产，动画蓝图，动态动画节点等方式，在已有的动画表演基础上增加基于物理的角色动画修饰效果，在游戏等交互项目中应用比较广泛。在影视动画项目中通常可以用来制作例如马尾，尾巴，挂坠，天线等物理动画
<a name="wYdQN"></a>
#### groom cache毛发缓存动画
虚幻引擎专门针对groom毛发的动画缓存数据，专门用于将外部预解算的毛发动画通过alembic格式导入到引擎中，播放后能够看到动画效果，显然通常用来实现角色的毛发预计算动画效果。
<a name="IZWXP"></a>
#### 几何缓存动画
通过alembic等中间格式，从外部DCC软件导入UE的顶点缓存动画。通过UE的的alembic导入器，我们可以选择导入为静态网格体加世界顶点偏移材质还是骨骼网格体加骨骼动画还是Geometry Cache几何缓存，通常用来制作角色服装上的较为飘逸的布料，飘带或是特殊镜头中角色形态剧变的动画。<br />不推荐大量使用几何缓存动画来实现常规的角色肢体动画需求
<a name="ahrZk"></a>
#### 控制绑定（ControlRig）
UE内置的实时绑定系统，让我们可以在引擎编辑器中通过类似编辑蓝图节点的方式，可视化，交互式的编写绑定逻辑脚本，同时支持前向后向解算，结合UE的动画模式让我们可以直接在sequence中手动创作动画数据，或者修改实时动捕得到的动画数据。
<a name="xrafq"></a>
#### IK绑定(IK Rig)
UE5新增的实时绑定系统，让我们能够使用直观交互的方式为各类骨骼网格体创建实时的IK动画解算器，并保存到IKRig资产中。然后我们就可以在其他动画系统，例如动画蓝图中动态修改解算器参数，对角色进行基于IKRig的实时动画调整。
<a name="rlMdK"></a>
#### IK重定向(IK Retargeter)
基于IKRig的重定向系统，为我们提供了全新的IK重定向资产编辑器，和批量重定向工具。相比以往UE4中的位移重定向方案，IK重定向支持在骨架结构完全不同的角色间进行动画资产重定向或实时动画重定向![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673504580078-d5d0f29c-565d-478f-9f0d-82c1c4b349a1.png#averageHue=%238f9281&clientId=u2524db96-4be8-4&from=paste&height=694&id=u4196e73c&originHeight=694&originWidth=816&originalType=binary&ratio=1&rotation=0&showTitle=false&size=343179&status=done&style=none&taskId=ud74a242e-69af-4fb9-96bf-270f7c4f873&title=&width=816)
<a name="VwlbR"></a>
#### 后处理动画蓝图
![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673504724625-fc424f93-5e29-41c5-bf2f-8cc0d75c4c64.png#averageHue=%23515349&clientId=u2524db96-4be8-4&from=paste&height=1187&id=u0eb2fdce&originHeight=1187&originWidth=1685&originalType=binary&ratio=1&rotation=0&showTitle=false&size=712391&status=done&style=none&taskId=u1cb248a0-0d82-448c-87ce-7aa004f981a&title=&width=1685)<br />能够在角色现有的动画蓝图，最终动画效果基础上，利用类似IK，骨骼控制等程序化功能使角色得到更为丰富的实时动画效果，这在游戏类交互项目中更为常用，但对于影视动画来说同样可以作为优化动画流程的一种参考手段
<a name="hwgWA"></a>
### 布料模拟动画

1. 在类似MD，Maya，houdini等外部DCC软件中制作布料模型并进行物理解算之后，作为alembic动态几何体缓存数据导入虚幻引擎。(这样做虽然可以可以确保动画布料的精度，但如果相关设计需要频繁修改也会导致角色动画环节甚至环境制作环节都需要为此付出不可忽视的成本，比如在引擎内制作的角色骨骼动画可能和布料产生交互的物体等都需要导出到外部DCC软件，此外布料的风力和引擎内方向风源相互独立也需要手动匹配，同时如果资产比较重，也会带来导入导出管理传输相关的成本)
2. 在创作阶段使用实时布料模拟结合角色骨骼动画预览整体效果，确定后再把角色骨骼动画导出到外部DCC软件并将物理解算后的布料几何缓存导回引擎。UE5的chaos布料编辑器操作和UE4的ncloth布料编辑器操作基本一致。																						 主要流程就是在制作布料模型时制作用于渲染的高精度模型和用于物理模拟的解算模型，指定不同的材质来确保导入引擎后成为不同的模型分段，![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673506618847-b11db02e-6a83-4876-82f8-e1afe38e9ad0.png#averageHue=%23272725&clientId=u2524db96-4be8-4&from=paste&height=375&id=ub589bc18&originHeight=375&originWidth=790&originalType=binary&ratio=1&rotation=0&showTitle=false&size=75546&status=done&style=none&taskId=u5f5521a8-5e59-4888-9d9c-ed9c41d8977&title=&width=790)然后在骨骼网格体编辑器中对解算模型分段创建布料数据	![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673505569747-89b046b1-1d3b-4263-9f03-92c2c4f47a41.png#averageHue=%235d6661&clientId=u2524db96-4be8-4&from=paste&height=601&id=OMG8B&originHeight=601&originWidth=971&originalType=binary&ratio=1&rotation=0&showTitle=false&size=320811&status=done&style=none&taskId=u603bebbd-2e46-41aa-968d-c7e8346154d&title=&width=971)调节物理模拟参数并使用笔刷针对不同目标绘制遮罩，比如最大距离，逆止距离等![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673505674409-65b439c1-f7e5-47b2-a818-55a041554d7b.png#averageHue=%23636361&clientId=u2524db96-4be8-4&from=paste&height=329&id=u31f01238&originHeight=329&originWidth=105&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36345&status=done&style=none&taskId=ubcb4779f-f9b4-4ecc-811f-b95f054e019&title=&width=105)![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673505643149-d006fd78-cf33-4bbb-8642-f151a4ace7da.png#averageHue=%233b3b35&clientId=u2524db96-4be8-4&from=paste&height=477&id=YMzBU&originHeight=477&originWidth=666&originalType=binary&ratio=1&rotation=0&showTitle=false&size=136928&status=done&style=none&taskId=u94c347fd-4831-4906-a3a2-af224b49f5a&title=&width=666)。     然后在渲染模型分段上应用布料数据![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673505741587-ecb1f70a-64c4-4c26-94af-7601c4ba406e.png#averageHue=%23a6aa53&clientId=u2524db96-4be8-4&from=paste&height=434&id=uafc472b5&originHeight=434&originWidth=844&originalType=binary&ratio=1&rotation=0&showTitle=false&size=200737&status=done&style=none&taskId=u80eac1bc-0650-4835-9328-21e7fb675d5&title=&width=844)并且进行布料平滑数据设置![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673505799055-e7cc1941-a7d8-438f-8ac2-f598a4741b41.png#averageHue=%23383e3c&clientId=u2524db96-4be8-4&from=paste&height=346&id=u51aaed53&originHeight=346&originWidth=464&originalType=binary&ratio=1&rotation=0&showTitle=false&size=115993&status=done&style=none&taskId=u2f872d1e-ba47-40cd-828a-f1231d53f30&title=&width=464)就可以得到实时的布料解算效果了。
<a name="G4Pg7"></a>
### 实时布料碰撞
<a name="gHEMN"></a>
#### 在UE5中存在两种布料碰撞形式：
1.环境碰撞<br />（包括角色骨骼网格体的其他分段以及场景），碰撞信息来自场景的简单碰撞。对于角色而言就是物理资产中跟随骨骼的物理体，对于场景而言就是静态网格体的简单碰撞(这里的简单碰撞不支持多边形碰撞![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673507583587-1ea73cc2-3c61-4467-b4e8-ffcb9a2a15c2.png#averageHue=%232d2d2c&clientId=u2524db96-4be8-4&from=paste&height=231&id=uc4419109&originHeight=231&originWidth=458&originalType=binary&ratio=1&rotation=0&showTitle=false&size=37615&status=done&style=none&taskId=u4cd3c166-aad5-436f-a45a-214c033a16d&title=&width=458)或者是将简单碰撞用作复杂碰撞![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673507612749-6684e881-7ebd-4dfc-be97-35219598f41d.png#averageHue=%23333333&clientId=u2524db96-4be8-4&from=paste&height=181&id=ud862f851&originHeight=181&originWidth=690&originalType=binary&ratio=1&rotation=0&showTitle=false&size=56594&status=done&style=none&taskId=ud4f58b0d-bc05-4c5c-937d-a6fd18a378c&title=&width=690))。<br />在UE5中为了提升角色肢体物理碰撞的精确度，除了手动为某根骨骼添加多个物理体之外，我们还可以从某个静态网格体中读取碰撞体形状来获得由多个简单物理形状组合而成的较为精确的物理体(可以跟随骨骼运动但不支持形变)![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673507847249-0ca3739d-cc23-458d-a448-c08a05f1e75b.png#averageHue=%2346544c&clientId=u2524db96-4be8-4&from=paste&height=1042&id=u81255a9c&originHeight=1042&originWidth=1820&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1005094&status=done&style=none&taskId=uca5e2d85-103a-41f5-b00c-80258849b1f&title=&width=1820)<br />2.布料自碰撞<br />仅限于布料解算模型分段自身的高精度碰撞检测![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673508037688-045784ea-f344-411c-9821-8b8cabc34848.png#averageHue=%2385873e&clientId=u2524db96-4be8-4&from=paste&height=920&id=u450c6f58&originHeight=920&originWidth=1060&originalType=binary&ratio=1&rotation=0&showTitle=false&size=310080&status=done&style=none&taskId=u542020b9-92e5-4d94-8eae-bce57dc09df&title=&width=1060)<br />本身用来实现布料横向摩擦碰撞产生褶皱形态或者是同一模型分段的多层布料之间的碰撞效果，性能消耗较高，对于复杂模型要慎用，对于简单角色模型也可以使用自碰撞来实现布料和角色肢体局部之间的精确碰撞。
<a name="pkSCu"></a>
### chaos布料的更新内容
1.在UE5.1中chaos布料得到了多项更新，其中新增的布料模拟缓存功能让我们可以在sequence中将布料实时模拟的结果保存为一个资产并且可以高性能可控的回放，结合布料自碰撞为全实时流程带来了可能。![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673509700757-736a3ed5-3833-4e7a-b0bc-9cd0c9a9854d.png#averageHue=%2336342e&clientId=u2524db96-4be8-4&from=paste&height=384&id=u48592133&originHeight=384&originWidth=920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=129769&status=done&style=none&taskId=u0a1d36e3-5051-4e3f-9b83-139da41a314&title=&width=920)<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673509714532-d63d4836-38d3-433d-8cde-0257b413404a.png#averageHue=%23282828&clientId=u2524db96-4be8-4&from=paste&height=114&id=u0850b71f&originHeight=114&originWidth=340&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10604&status=done&style=none&taskId=ub41cc258-354b-4080-bc12-cf3ef2e4c6c&title=&width=340)<br />2.布料压力控制<br />用来模拟布料自身向外或向内的固有压力，对于制作比如气球等布料效果比较有帮助。还可以通过绘制布料压力遮罩来区分不同区域布料的压力数值![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673510346775-0a964490-96c8-407a-9569-b2923e01c88b.png#averageHue=%23323230&clientId=u2524db96-4be8-4&from=paste&height=448&id=u506ee790&originHeight=448&originWidth=612&originalType=binary&ratio=1&rotation=0&showTitle=false&size=129828&status=done&style=none&taskId=u6f42f99a-9928-4c31-a303-2092076babd&title=&width=612)<br />3.布料自碰撞的改进<br />可以针对自碰撞设置额外的步进值来提升碰撞精度，通过调整自穿插精度来修复默认碰撞无法应对的穿插问题，还可以通过新增的自碰撞摩檫力参数来调整布料的褶皱形态。![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673510548706-4763d3e4-8f40-4fe7-bd6b-858368c365cc.png#averageHue=%233e3e3e&clientId=u2524db96-4be8-4&from=paste&height=344&id=ua58d501f&originHeight=344&originWidth=634&originalType=binary&ratio=1&rotation=0&showTitle=false&size=65626&status=done&style=none&taskId=u9c6beb10-4c28-4df7-ae14-15edca77b2b&title=&width=634)
<a name="iErg9"></a>
### Control Rig 控制绑定
<a name="hRmeD"></a>
#### ControlRig蓝图编辑器如何使用
1.加载插件<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673511329710-39e77c7c-1301-444a-8c8f-d62ea7f63646.png#averageHue=%233b3a31&clientId=u2524db96-4be8-4&from=paste&height=432&id=ubcd39bbe&originHeight=432&originWidth=906&originalType=binary&ratio=1&rotation=0&showTitle=false&size=130600&status=done&style=none&taskId=u25e8be24-a5ba-4f4a-9a1c-6cf962c18ac&title=&width=906)<br />2.创建蓝图<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673511452103-e8a6737b-c0a0-4995-921b-cd8a0e2b2d11.png#averageHue=%2351524d&clientId=u2524db96-4be8-4&from=paste&height=522&id=u2990ac02&originHeight=522&originWidth=651&originalType=binary&ratio=1&rotation=0&showTitle=false&size=151079&status=done&style=none&taskId=u7742c8ac-09cd-4b58-932c-ba072f31ede&title=&width=651)<br />进入ControlRig蓝图编辑器在左下角导入层级选择骨骼网格体<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673512285686-f1a33899-7db3-417d-a2ca-fc2a891a4094.png#averageHue=%23313131&clientId=u2524db96-4be8-4&from=paste&height=215&id=ue6c2fb10&originHeight=215&originWidth=788&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38361&status=done&style=none&taskId=u9e57cadb-9ef4-4292-b1d2-26d2c7c8b57&title=&width=788)<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673512536543-1496237e-5dc8-44ff-837b-fecdb354d821.png#averageHue=%23848870&clientId=u2524db96-4be8-4&from=paste&height=1241&id=u05e2d9a8&originHeight=1241&originWidth=686&originalType=binary&ratio=1&rotation=0&showTitle=false&size=492699&status=done&style=none&taskId=u75ab3b6b-e009-4b00-864c-c74f30d4ae9&title=&width=686)<br />这里的骨骼层级与ControlRig资产之间并不是绑定关系，而是纯粹的读取。<br />蓝图中的三个事件节点：<br />不同的绑定逻辑有不同的执行时机。<br />向前解析（用的最多的解析事件）：指的是在编辑器中，通过ControlRig来驱动骨骼时所执行的绑定逻辑。无论是在Sequence中用ControlRig的控制器来创作动画还是在运行时用ControlRig实时修饰动画，执行的都是向前解析节点之后的绑定逻辑。<br />向后解析：一般用于在Sequence中将现有的骨骼动画烘焙到控制器上。在这里一般用骨骼的数据来驱动控制器。<br />设置事件：只在ControlRig运行的时候执行一次，通常在这里编写用于初始化的绑定逻辑

![image.png](https://cdn.nlark.com/yuque/0/2023/png/2623605/1673513058013-bfac7832-a48b-42d2-a844-829b3535144d.png#averageHue=%232a2726&clientId=u2524db96-4be8-4&from=paste&height=461&id=u7c6676e9&originHeight=461&originWidth=336&originalType=binary&ratio=1&rotation=0&showTitle=false&size=89053&status=done&style=none&taskId=u12b25e72-9684-4ec4-bbbb-4eed1150dae&title=&width=336)


<a name="ChdNJ"></a>
## 常见问题及最佳实践
<a name="duoEv"></a>
### 如何在UE5中确保可控的动画品质
首先要通过各类参考来明确动画品质的目标，最好能针对重要的镜头提供较为精准的动画脚本和参考视频，来帮助动画设计师快速了解品质需求，降低沟通成本。<br />然后是通过技术手段和审查机制量化动画数据，提高动画数据的保真度，<br />另外要尽可能在统一的技术环境中生产和修改动画数据，减少数据交换频次，避免因为导入导出产生的差错和数据的精度损失。<br />推荐使用Control Rig结合动画模式在引擎中创作动画，最大程度减少角色动画数据的导入导出，最后在流程上，由于动画项目中对动画环节的修改较为频繁，最好能通过性价比较高的方式快速决定动画整体效果，然后再跟随项目阶段快速迭代细节。
<a name="naT5B"></a>
### 如何在UE5中通过优化动画流程来降低协作成本
首先在设计阶段就可以把角色动画进行拆分，例如参考metahumen并且结合自身项目自身要求，把例如身体动画，表情动画，衣服布料动画，毛发动画，拆分成不同的资产和动画环节，按照统一的标准由专人分别负责制作。这样更便于提炼出更通用的绑定标准。 <br />针对例如角色身体，建立适合项目的通用绑定资产，适用于尽可能多的人形角色，最大化资产多次复用的可能性，也降低了因为绑定标准的不同带来的沟通成本。<br />在角色蓝图中将这些部件进行拼装整合，使动画设计师能够像操纵完整的骨骼网格体一样，针对这个角色蓝图在引擎中创作动画。


---
title: UE 3D数学材质
tags: UnrealEngine
categories: UnrealEngine
abbrlink: 4e25f5f6
date: 2023-08-29 03:57:00
---
<meta name="referrer" content="no-referrer" />

<a name="TZArI"></a>
#  材质编辑介绍
材质节点是封装好的HLSL高级着色器语言<br />流程：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1639839036217-b374ced7-3ad6-49c2-82bb-2cc86738d45a.png#clientId=u557a0c86-ccd3-4&from=paste&height=203&id=u86f78514&originHeight=203&originWidth=989&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31713&status=done&style=none&taskId=ucfa534c5-87fc-4156-a946-f5beb296c21&title=&width=989)<br />shader graph→HLSL Code →Assembly Instructions→ Graphics Driver<br />材质连接图转换为HLSL代码再转换为汇编语言指令然后传递给驱动程序。
<a name="AUXE1"></a>
# 渲染管线介绍![2EAC1D4764798088F91EE7505ED1418B.jpg](https://cdn.nlark.com/yuque/0/2021/jpeg/2623605/1639819907016-f9658307-c340-4f5e-a6c1-7ac52f1e616a.jpeg#clientId=u5a00d30a-4e1f-4&from=paste&height=1920&id=myKKR&originHeight=1920&originWidth=719&originalType=binary&ratio=1&rotation=0&showTitle=false&size=196953&status=done&style=none&taskId=ue03dc7c0-b22d-4cf6-8d86-04190867ee9&title=&width=719)
<a name="F0tnJ"></a>
# 各种贴图的作用与介绍
[https://zhuanlan.zhihu.com/p/396841468](https://zhuanlan.zhihu.com/p/396841468)
<a name="E7vpQ"></a>
## 贴花
创建一个材质，材质域改为延迟贴花，混合模式改为半透明，需要透明贴图，颜色贴图，法线贴图，粗糙度贴图。<br />贴图可以在bridge下载。延迟贴花对静态光照支持程度不太好，适用于动态光照。<br />可以在模型的细节面板中调节是否接受贴花<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622358469128-b4fed55c-0286-4f7f-8071-ff3c6596b249.png#clientId=ua3f34d0a-8152-4&from=paste&height=87&id=u75cd1e93&originHeight=87&originWidth=191&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2947&status=done&style=none&taskId=u84b8df24-eb5e-40be-b5c1-51d96173a06&title=&width=191)<br />多个贴花重合时可以通过更改贴花的排序顺序来控制贴花的出现前后<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622358596114-53e5e10a-3790-42a7-9f85-570911f7ceda.png#clientId=ua3f34d0a-8152-4&from=paste&height=203&id=ufbc92ebe&originHeight=203&originWidth=308&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12668&status=done&style=none&taskId=uf4b16f49-efc5-4411-a899-713edb60769&title=&width=308)<br />材质中可以更改贴花混合模式。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1639839846269-97525207-40d8-48ed-af56-67ec63ea82ec.png#clientId=u557a0c86-ccd3-4&from=paste&height=241&id=u1e1a0a36&originHeight=241&originWidth=327&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32752&status=done&style=none&taskId=uc163f8a2-65ad-424c-ac46-eb5925ebb54&title=&width=327)
<a name="H8EDr"></a>
## 节点函数
BreakMaterialAttributes（中断材质属性）:<br />在使用 [分层材质](https://docs.unrealengine.com/latest/CHN/Engine/Rendering/Materials/LayeredMaterials/index.html) （“材质功能”系统的一项特性）时，**BreakMaterialAttributes（中断材质属性）**表达式十分理想。在材质中使用 **材质层功能** 时，您可能想只使用材质层的某一个方面。例如，您可能有一个定义漂亮的一般材质（如钢铁）的材质层。您可能希望在最终材质中仅使用该材质层的“粗糙度”和“底色”属性，而不是使用整个材质层。在此类情况下，您可使用 BreakMaterialAttributes（中断材质属性）节点对材质层的所有传入属性进行拆分，然后仅连接所需的属性。这也使您能够对各种材质属性进行复杂混合。
<a name="cNexr"></a>
## 纹理
AO，Displacement，normal，roughness，metalness（金属贴图）都是不需要勾选srgb的。ORM三合一贴图也是需要将srgb关掉。![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614606570846-3d0c9150-321c-478d-b522-0c0c8485d26c.png#height=216&id=b1bHt&originHeight=216&originWidth=452&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12008&status=done&style=none&title=&width=452)
<a name="l15wd"></a>
## 混合模式
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596578224-5f339e07-99ae-4489-b3bf-90345ff24120.png#clientId=u95208703-94e3-4&from=paste&height=113&id=ufce5a515&originHeight=113&originWidth=158&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7225&status=done&style=none&taskId=ua3bb1b7e-fc0a-458c-848b-153bf90f674&title=&width=158)<br />**不透明**它定义了光线无法通过或穿透的表面。此模式适用于大部分塑料、金属、石头以及较大比例的其他表面类型。<br />**已遮罩**混合模式用于您需要以二元（开/关）方式选择性地控制可见性的对象。例如，假定一个材质要模拟铁丝网围栏或格栅。某些区域看起来像是固体，而其他区域不可见。此类材质适合于"遮罩"（Masked）混合模式。<br />半透明：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596885579-3328e4d3-acb5-4203-915c-bf0437c82308.png#clientId=u95208703-94e3-4&from=paste&height=362&id=u4348c84f&originHeight=362&originWidth=1108&originalType=binary&ratio=1&rotation=0&showTitle=false&size=265741&status=done&style=none&taskId=ua76816ff-de7d-4848-9c9e-94669d3f375&title=&width=1108)<br />"**叠加型**"（Additive）混合模式无非获取材质的像素，并将其与背景的像素相加。这与Photoshop中的_线性减淡（添加）_混合模式非常相似。这表示不会进行暗化；因为所有像素值都_添加_到一起，因此黑色将直接渲染为透明。这种混合方式适合于各种特殊效果，例如火焰、蒸汽或全息图。<br />其他混合模式详情：<br />[https://docs.unrealengine.com/zh-CN/RenderingAndGraphics/Materials/MaterialProperties/BlendModes/index.html](https://docs.unrealengine.com/zh-CN/RenderingAndGraphics/Materials/MaterialProperties/BlendModes/index.html)
<a name="DXGN0"></a>
## 光照模式（半透明）
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596049790-5c72563d-2e11-4909-bc03-1897e81f9c85.png#clientId=u95208703-94e3-4&from=paste&height=139&id=u2719413e&originHeight=139&originWidth=285&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13390&status=done&style=none&taskId=u76305dd3-2e84-468c-9f1f-62f12f67686&title=&width=285)<br />体积无方向 适用于烟雾和沙尘之类的粒子效果![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596115402-fd312db0-f22a-4b6f-9799-7f70e11b826e.png#clientId=u95208703-94e3-4&from=paste&height=45&id=u7e60c9e8&originHeight=45&originWidth=383&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9739&status=done&style=none&taskId=ub2b92e6a-39cc-4c5e-94f6-0f6798004fb&title=&width=383)<br />体积方向  ![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596142792-ce989fcc-e798-4382-95b8-ae8a253b78e1.png#clientId=u95208703-94e3-4&from=paste&height=37&id=u1bfc0b64&originHeight=37&originWidth=602&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11291&status=done&style=none&taskId=u348b2c1a-d067-4ac5-b3b1-93ce6c9b08c&title=&width=602)<br />逐顶点体积无方向![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596205695-e3079f20-f9e9-40e0-b16d-0ce44841d241.png#clientId=u95208703-94e3-4&from=paste&height=50&id=uc0d642ca&originHeight=50&originWidth=426&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11105&status=done&style=none&taskId=u3189812b-f7e9-4158-90e9-59e584de81d&title=&width=426)<br />逐顶点体积方向![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596219490-a7c054b8-efc3-4c4d-b0c7-68c7e035d18e.png#clientId=u95208703-94e3-4&from=paste&height=53&id=uc1aef0de&originHeight=53&originWidth=426&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11101&status=done&style=none&taskId=uda14fa1b-dbc4-48c5-99dd-f8441feace0&title=&width=426)<br />表面半透明体积![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596251734-ef0df32d-8a05-4437-b3cf-de2e4af7c8dc.png#clientId=u95208703-94e3-4&from=paste&height=58&id=uf94c5f00&originHeight=58&originWidth=420&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11751&status=done&style=none&taskId=u166d1f95-5a69-414e-af69-4f414aa2784&title=&width=420)<br />表面向前着色![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596288652-9c28538f-d0ad-44a9-bb11-0e09425c5a91.png#clientId=u95208703-94e3-4&from=paste&height=57&id=u69e9a5ed&originHeight=57&originWidth=513&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15594&status=done&style=none&taskId=u66e58623-a587-41e2-a97c-3f60fbf341a&title=&width=513)<br />从上往下依此消耗性能越来越大，质量越来越高。
<a name="I0ugw"></a>
## 着色模型
[https://docs.unrealengine.com/zh-CN/RenderingAndGraphics/Materials/MaterialProperties/LightingModels/index.html](https://docs.unrealengine.com/zh-CN/RenderingAndGraphics/Materials/MaterialProperties/LightingModels/index.html)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635594646901-98b4639c-3b4f-4532-82c8-347775cf7658.png#clientId=u95208703-94e3-4&from=paste&height=206&id=u53912f8e&originHeight=206&originWidth=133&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11039&status=done&style=none&taskId=u717043bd-f75b-4fac-8699-3794b4bb138&title=&width=133)<br />其中**无光照（Unlit）** 着色模型仅输出颜色自发光，非常适用于特殊效果，例如火焰或照明物。它看起来会发光，但是此对象不会投射光线或阴影。<br />只提供自发光的灯棒可以使用此着色模型，之所以使用无光照模式是因为这样<br />**默认光照（Default Lit）** 是默认着色模型，而且很可能是最常用的模型。 此着色模型使用直接和间接光照，以及反射高光。<br />**次表面（Subsurface）** 着色模型能够模拟次表面散射效果。适用于植物（树叶，荷叶），皮肤，冰面，大理石，蜡烛，牛奶，雪。<br />**预整合蒙皮（Pre-integrated Skin）** 着色模型的性质与次表面（Subsurface）模型非常相似，适用于人类角色的低性能开销皮肤渲染。尽管在物理效果上并不完美， 但此着色模型渲染开销低于次表面（Subsurface）法，而且通常能实现不错的角色效果。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635594881809-ac688f8e-dbad-45fa-b142-02d7780a20b9.png#clientId=u95208703-94e3-4&from=paste&height=692&id=uc9542bce&originHeight=692&originWidth=1176&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1516255&status=done&style=none&taskId=ube75fcf3-7c43-4d27-b77e-5a2bdfa9b26&title=&width=1176)<br />[次表面轮廓着色模型](https://docs.unrealengine.com/4.27/zh-CN/RenderingAndGraphics/Materials/LightingModels/SubSurfaceProfile)的性质与次表面（Subsurface）和预整合皮肤（Preintegrated Skin）着色模型非常相似， 但该模型只适用于高端皮肤渲染。如果希望模拟皮肤，尤其是人类皮肤，该模型为着色模型最佳选择。<br />**双面植被** 着色模型允许光线穿透材质表面，形成自然、统一的外观效果，比如光线穿透树叶那种效果。次表面颜色（使用此着色模型后可以访问的输入）用于定义光线穿透量，同时用于为叶片茎脉等部分创建遮罩。<br />**单层水面**：可以通过 **单层水（Single Layer Water）** 着色模型在使用 **不透明（Opaque）** 混合模式时实现透明水面的效果。这样可以降低需要使用 **透明（Transparent）** 混合模式的材质的使用开销和复杂性。更多详情请参阅[单层水体着色模型](https://docs.unrealengine.com/4.27/zh-CN/RenderingAndGraphics/Materials/MaterialProperties/LightingModels/SingleLayerWater)。<br />**薄半透明（Thin Translucent）** 着色模型支持基于物理原理的半透明材质类型，可以通过该模型创建能准确处理高光度和背景对象的真实有色或彩色玻璃。<br />**From材质表达式（From Material Expression）** （或逐像素（Per-Pixel））着色模型是一种高级功能，用于通过材质图表中的逻辑将多个着色模型合并到单个材质（或材质实例）中。当 **着色模型（Shading Model）** 设置为 **From材质表达式（From Material Expression）** 时，**着色模型** 输入将变为可用，可以使用材质图表（Material Graph）中的 **阴影模型（Shading Model）** 节点进行设置。
<a name="jMzSL"></a>
# 各种材质的制作方法
<a name="rtMGg"></a>
## 玻璃制作
玻璃：细节面板要为![image.png](https://cdn.nlark.com/yuque/0/2020/png/2623605/1603892333269-d11d9480-9f06-43fa-997a-217bc0d7aaa9.png#height=96&id=BX6rg&originHeight=96&originWidth=226&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5030&status=done&style=none&title=&width=226)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635667818122-07248991-5042-4466-b633-3b1dc6d9d59a.png#clientId=u5e27514f-481f-4&from=paste&height=231&id=uf9ec0117&originHeight=231&originWidth=359&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15228&status=done&style=none&taskId=ud47fff24-c9bc-456b-a2ca-6a501321648&title=&width=359)使用此光照模式是因为这个效果最好但是性能消耗也最高,并且使用此光照模式的话需要通过![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635667870402-73a502e2-5e8c-4ed2-b381-bbd6a5ac8c26.png#clientId=u5e27514f-481f-4&from=paste&height=200&id=u5ea62eeb&originHeight=200&originWidth=515&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32073&status=done&style=none&taskId=u0e8c7d19-e48f-47a3-a069-51df0f35cea&title=&width=515)Thin Translucent Material节点来控制玻璃的颜色（只有在使用表面向前着色的光照模式下，才能更好的控制玻璃的颜色）。如果想要制作性能消耗较低的光照模式可以使用![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635667942722-c270a14c-1909-49f9-a46a-0a1423ae3285.png#clientId=u5e27514f-481f-4&from=paste&height=138&id=u4ea18df8&originHeight=138&originWidth=309&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13505&status=done&style=none&taskId=u354645a3-9a0c-4938-874c-09039c927c6&title=&width=309)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635599022924-dc5ee01e-884f-43ea-a021-b3720560727d.png#clientId=ud7cd252e-d380-4&from=paste&height=297&id=u63b7e6f1&originHeight=297&originWidth=338&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17793&status=done&style=none&taskId=u806d782a-97fa-4e6a-987a-b04f5db52e9&title=&width=338)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1639551318005-6b557f24-fdd5-4b61-b477-a85ae543912b.png#clientId=ue4c5f072-399b-4&from=paste&height=126&id=u391ada27&originHeight=126&originWidth=274&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6663&status=done&style=none&taskId=u130357de-7be1-40f8-ba69-35223a427b0&title=&width=274)屏幕空间反射的勾选和高品质反射可以进一步提升质量<br />景深后渲染影响的是玻璃物体是否受到景深的影响<br />玻璃有菲涅尔效应<br />玻璃的边缘不透明度高，中间不透明度低。<br />边缘折射率高，中间折射率低。<br />可以设置的折射模式介绍：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1639551411028-c0a5049e-2c84-4fd7-8864-4d669cc010b0.png#clientId=ue4c5f072-399b-4&from=paste&height=97&id=uc6bfab09&originHeight=97&originWidth=619&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32642&status=done&style=none&taskId=u02cd2817-d8f9-48a3-876b-5044db2b120&title=&width=619)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1639551439310-e9fba1af-c87e-4d0a-b006-a3fa23d32cf8.png#clientId=ue4c5f072-399b-4&from=paste&height=130&id=uef88a596&originHeight=130&originWidth=670&originalType=binary&ratio=1&rotation=0&showTitle=false&size=45308&status=done&style=none&taskId=u51308d5e-cc30-4d5b-80d3-7f3b6d7ac2e&title=&width=670)<br />假反射的hdr贴图需要将贴图属性的srgb关掉![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635596924292-a89a203c-d05f-4c96-a761-ccbe9cf28a1a.png#clientId=u95208703-94e3-4&from=paste&height=362&id=u7597db1d&originHeight=362&originWidth=1108&originalType=binary&ratio=1&rotation=0&showTitle=false&size=265741&status=done&style=none&taskId=u000a38e6-b200-4740-a994-069f26d955f&title=&width=1108)<br />![PreviewMaterial_2-MaterialGraph_0.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635668650441-7e9363de-d192-41f1-a4bc-3086462b1947.png#clientId=u5e27514f-481f-4&from=paste&height=1322&id=u06be75d2&originHeight=1322&originWidth=881&originalType=binary&ratio=1&rotation=0&showTitle=false&size=286837&status=done&style=none&taskId=u6be51e1a-6a52-4107-a80c-6bf2eeba19b&title=&width=881)<br />截图中的颜色是显示错误的，按照数值创建不会显示为白色
<a name="OLPOl"></a>
## 植被材质
混合模式改为已遮罩，着色模型改为双面植物，开启双面<br />two sided sign节点 ：双面迹象（可以在做双面材质比如植物的时候配合multiply节点）![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612351443750-80944f94-7aa9-4fb4-aaf2-8d08c62403e9.png#height=257&id=YB9RM&originHeight=257&originWidth=443&originalType=binary&ratio=1&rotation=0&showTitle=false&size=161941&status=done&style=none&title=&width=443)<br />**实现让法线贴图影响双面的效果。**<br />想让草动可以加个simple grass wind 节点<br /> ![image.png](https://cdn.nlark.com/yuque/0/2020/png/2623605/1603964129805-87459fde-00c0-4b36-86e9-3c5d1235ffb9.png#height=395&id=lQuZh&originHeight=395&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=170485&status=done&style=none&title=&width=599)（其中WPO应该连接color贴图这里图片弄错了，作用是提供植物图不让植物动时产生撕裂感。）如果是整个植物一起动那么就用world position和object pivot point（对象轴心点）和distance（测量距离节点） ![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612355887036-ca31d6c5-cc36-458d-8df2-6e1bc75f8bd5.png#height=254&id=NJjKR&originHeight=254&originWidth=696&originalType=binary&ratio=1&rotation=0&showTitle=false&size=140012&status=done&style=none&title=&width=696)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612355943413-ad942e65-d1fe-40f7-903e-3b0fb89e3bde.png#height=321&id=CRwWe&originHeight=321&originWidth=871&originalType=binary&ratio=1&rotation=0&showTitle=false&size=247740&status=done&style=none&title=&width=871)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612355989741-3164766b-69e0-4f40-9007-f59ea209cabf.png#height=771&id=aEVwa&originHeight=771&originWidth=1152&originalType=binary&ratio=1&rotation=0&showTitle=false&size=631680&status=done&style=none&title=&width=1152)（1,1,0目的是使植物不向上移动，那个黑白贴图是根据植物的UV绘制的，将根涂黑，使根不产生位置偏移。）<br />**最终节点连接到世界场景位置偏移**
<a name="IY74j"></a>
## 简单的土壤材质制作：通过使用matlayerblend_standard节点配合vertex color节点制作可以使用顶点绘制控制土壤材质的混合材质
（vertex color节点还可以配合浪花贴图，制作出可以手动绘制岸边浪花效果的材质。）<br />各个材质函数基本连线：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612273911544-fc8ac3b0-cd0e-4905-be10-e2981fcdc2d2.png#height=926&id=Z4uhW&originHeight=926&originWidth=942&originalType=binary&ratio=1&rotation=0&showTitle=false&size=986850&status=done&style=none&title=&width=942)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612273094749-ee11f75d-6c95-4440-9038-e84919c540ae.png#height=336&id=mE0Tz&originHeight=336&originWidth=730&originalType=binary&ratio=1&rotation=0&showTitle=false&size=227132&status=done&style=none&title=&width=730)
<a name="iKAJN"></a>
## 地形材质
做地形材质之前首先要有一个 材质函数（在内容浏览器中右键→材质和纹理中找到），在使用材质函数时可以使用MakeMaterialAttributes节点，地形的UV坐标节点是使用LandscapeCoords，将节点细节中的映射缩放改为1<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612274090802-f94edf41-3b38-42b4-af7b-d286198ffda4.png#height=653&id=QVWWH&originHeight=653&originWidth=1094&originalType=binary&ratio=1&rotation=0&showTitle=false&size=304376&status=done&style=none&title=&width=1094)<br />材质函数创建好后，可以在新建的材质中调用这个材质函数。FunctionInput为输入函数，调用时：![image.png](https://cdn.nlark.com/yuque/0/2020/png/2623605/1604663780993-8b2e1d90-ecdc-44a2-a497-166c6ef1b161.png#height=54&id=JJNBs&originHeight=54&originWidth=118&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14419&status=done&style=none&title=&width=118)(Grass为材质函数名字，UV为输入函数名字)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612273408701-8513a439-efcd-449b-930b-7f5cbe37e1ad.png#height=559&id=LnoTx&originHeight=559&originWidth=936&originalType=binary&ratio=1&rotation=0&showTitle=false&size=240657&status=done&style=none&title=&width=936)最后通过landscape layer blend节点将制作的各个材质函数混合到一起，预览权重改成1。<br />这里的layer blend 既可以连接贴图也可以连接材质。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1612273458337-0f936354-d978-402a-811b-379df852bf17.png#height=405&id=Gr6jB&originHeight=405&originWidth=382&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31069&status=done&style=none&title=&width=382)<br />![image.png](https://cdn.nlark.com/yuque/0/2020/png/2623605/1605183590540-f99f2f13-bc2b-4ec6-8ed1-3b8df1bc9910.png#height=183&id=iltTd&originHeight=183&originWidth=303&originalType=binary&ratio=1&rotation=0&showTitle=false&size=81531&status=done&style=none&title=&width=303)创建地形混合材质时，如果混合的贴图过多，在绘制时会出现这种编译不出来的情况，解决办法：将混合的材质的每个贴图的采样器源改为包裹![image.png](https://cdn.nlark.com/yuque/0/2020/png/2623605/1605183729341-7602145e-a93f-42b7-a349-c914c784bea5.png#height=227&id=LDNvw&originHeight=227&originWidth=346&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19537&status=done&style=none&title=&width=346)
<a name="ijB9R"></a>
### 混合类型的功能区别：
| 混合类型 | 功能 |
| --- | --- |
| **LB权重混合** | 如层来自外部程序，如World Machine，或需要独立绘制各层，而无需担心层顺序，即可使用此类型。 |
| **LB Alpha混合** | 如要绘制细节并需要已定义的层顺序，则使用此类型。例如，在岩石和草地上绘制雪层会遮住，但擦除后会显示下放岩石和草地。 |
| **LB高度混合** | 此与LBWeightBlend相同，但会基于高度图将细节添加至层间的过渡。利用此项，可进行如岩石间缝隙中的层过渡点出现泥土等操作，而不仅仅是岩石和泥土平滑混合。 |

此为 **LB高度混合** 的操作范例。正如所见，岩石缝隙间的层过渡点出现了泥土。如此便可在层交回处实现自然过渡。<br />![](https://cdn.nlark.com/yuque/0/2021/jpeg/2623605/1617938242088-d8af1f12-21ee-4824-8fea-e101474f413c.jpeg#height=192&id=fLtdT&originHeight=192&originWidth=343&originalType=binary&ratio=1&rotation=0&showTitle=false&size=0&status=done&style=none&title=&width=343)<br />LB权重混合的意思类似于PS中的：<br />两个不同的贴图使用同一个图层<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1642325780853-9ddd526a-6b76-4388-8ae3-78093122ef4d.png#clientId=u9093c321-2e3a-4&from=paste&height=520&id=u3b962f7d&originHeight=520&originWidth=636&originalType=binary&ratio=1&rotation=0&showTitle=false&size=46906&status=done&style=none&taskId=u163ced1b-48ed-42df-a54a-50ee6c6e0ec&title=&width=636)![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1642325796912-c4c3ce81-b065-43db-9c20-c4f704c65351.png#clientId=u9093c321-2e3a-4&from=paste&height=88&id=u7b3f7ded&originHeight=88&originWidth=221&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11458&status=done&style=none&taskId=u0d86ee6f-b565-44ac-b539-0972db22501&title=&width=221)<br />LB Alpha混合类似于PS中的：<br />两个不同的贴图在不同的图层，权重小的不能够覆盖在权重大的上面，图层关系通过预览权重来决定（UE5教程是这样，但是UE4.26亲测不行，UE4.26是根据图层顺序排布的,看官方文档上说的预览权重影响的是材质编辑器上预览的权重大小。），预览权重高的在上面![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1642325983704-3f71470d-0666-47e7-9fac-a1834c6e20c0.png#clientId=u9093c321-2e3a-4&from=paste&height=329&id=u3737fd3d&originHeight=329&originWidth=239&originalType=binary&ratio=1&rotation=0&showTitle=false&size=44270&status=done&style=none&taskId=uf3c8f95b-6028-472c-b907-825b03cf9e6&title=&width=239)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1642325882136-0be3f978-3e37-43c9-a10f-e99e215e3b81.png#clientId=u9093c321-2e3a-4&from=paste&height=505&id=u15094e17&originHeight=505&originWidth=739&originalType=binary&ratio=1&rotation=0&showTitle=false&size=56031&status=done&style=none&taskId=u85bf72ef-19d3-4055-ba52-dab6873498d&title=&width=739)<br />使用Alpha混合时需要使用![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1642326035669-a6a4204a-f545-4e43-a83d-732ec42fe5b5.png#clientId=u9093c321-2e3a-4&from=paste&height=156&id=uba5811f8&originHeight=156&originWidth=379&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32851&status=done&style=none&taskId=u99c01b44-1a33-4057-9476-f07e7af7296&title=&width=379)非权重混合层。其他两种方法使用权重混合层。![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1642326102122-87476718-ccd4-4367-a1c4-521b5458cc5b.png#clientId=u9093c321-2e3a-4&from=paste&height=157&id=u532267b0&originHeight=157&originWidth=797&originalType=binary&ratio=1&rotation=0&showTitle=false&size=86385&status=done&style=none&taskId=u94fbc29d-c81f-478c-a5c1-7d17f066a43&title=&width=797)<br />LB高度混合使用height图后高度效果只会影响同一权重的贴图效果而不会影响Alpha混合类型的贴图。
<a name="d1spx"></a>
### 地形绘制出现黑斑的处理方法
官方文档描述：总结就是将默认地形材质层混合模式设置为LB_AlphaBlend<br />使用层混合模式的特定组合时，地形上不同层交叉的位置将出现大量黑斑。将LB_HeightBlend模式用于多地形层时，此问题尤其常见。LB_HeightBlend的工作原理是使用指定权重值调制层的混合系数或权重。如区域上绘制有多个层，且均被设为LB_HeightBlend，则可能特定区域中绘制的所有层将同时拥有0高度值，因此各层的理想混合系数将变为0。<br />由于无隐式或显式排序，且无层对该区域有贡献，因此结果会产生黑斑。由于混合法线贴图会产生法线值(0,0,0)，且该值无效，会导致照明渲染问题，因此混合法线贴图时情况会更糟。针对此问题的解决方案是对其中一个层使用 **LB_AlphaBlend**，如以下范例所示。<br />左图中所有层均为LB_HeightBlend，会导致部分区域变黑。在右图中，红色"1"层已改为使用LB_AlphaBlend，从而解决该问题。<br />![](https://cdn.nlark.com/yuque/0/2022/jpeg/2623605/1642335303431-7f3b458a-1f62-4ce2-9e7f-5ac2b30cc2cb.jpeg#clientId=u9093c321-2e3a-4&from=paste&id=uc7c1fccc&originHeight=238&originWidth=800&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uacb7756b-aa70-4007-aa21-7257f843f4f&title=)<br />以下是混合起来的所有层的 **Landscape Layer Blend** 节点属性范例。务必注意 **土壤** 层将其混合模式设为LB_AlphaBlend，而其他层则设为LB_HeightBlend。此设置旨在避免发生上文中的问题（层交汇处出现黑斑）。<br />![](https://cdn.nlark.com/yuque/0/2022/jpeg/2623605/1642335301028-179625af-8d1c-4541-8502-37c758d14dfa.jpeg#clientId=u9093c321-2e3a-4&from=paste&id=u0b9e4c29&originHeight=486&originWidth=355&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u8556172d-81ca-4e71-b58f-3b56d59ecba&title=)
<a name="ZJe73"></a>
## 高级地形
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613034372161-c181a6d0-c1ea-4aba-966e-c3abc85cc3ac.png#height=109&id=QHk4h&originHeight=109&originWidth=298&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22160&status=done&style=none&title=&width=298)：材质混合节点(和线性插值节点作用很相近，区别在于材质混合节点针对的是材质)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613036346149-64fe3870-b39a-49dc-a4dc-863e1b547001.png#height=58&id=UDm67&originHeight=58&originWidth=136&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14721&status=done&style=none&title=&width=136)(常量偏差比例)：默认功能是将数据都加上1然后都乘0.5，可以手动更改数值，可以配合sine实现数值的偏移。

![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613042120130-dbf953ff-8691-41ca-b48d-6664cfa296a3.png#height=263&id=bATz3&originHeight=263&originWidth=976&originalType=binary&ratio=1&rotation=0&showTitle=false&size=217849&status=done&style=none&title=&width=976)<br />第二个节点：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613458507334-4d3e00d7-8e9b-4cd4-a9b3-875b25454ea8.png#height=75&id=AmNqp&originHeight=75&originWidth=196&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17166&status=done&style=none&title=&width=196)此处节点作用是将切线空间转换为世界场景空间<br />此节点也可以设置其他的空间的转换：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613458678994-6baf3f93-154e-4b7b-ae0c-95414a5b9873.png#height=142&id=btc1m&originHeight=142&originWidth=254&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10144&status=done&style=none&title=&width=254)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613042145106-8187858b-056d-4bda-acf6-04810bd4d6f7.png#height=425&id=eZgAC&originHeight=425&originWidth=825&originalType=binary&ratio=1&rotation=0&showTitle=false&size=394237&status=done&style=none&title=&width=825)<br />整体：<br />![QQ截图20210211184108.jpg](https://cdn.nlark.com/yuque/0/2021/jpeg/2623605/1613040091971-ef4aed46-5cc5-447e-b82e-34143da64a88.jpeg#height=534&id=ObJOZ&originHeight=534&originWidth=1225&originalType=binary&ratio=1&rotation=0&showTitle=false&size=81262&status=done&style=none&title=&width=1225)
<a name="NHSVN"></a>
## 地形自带植物效果：
LandscapeLayerSample节点：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613041412591-cafec830-5d23-4e48-9854-b9c3da70c6d5.png#height=59&id=dwJpW&originHeight=59&originWidth=113&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6796&status=done&style=none&title=&width=113)其中None为参数名，使用时将None改为![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613041449356-7c967f0f-f9c1-4425-b009-baa1e846d2f4.png#height=173&id=E2t26&originHeight=173&originWidth=121&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14121&status=done&style=none&title=&width=121)layer blend中的名字，作用是将混合的材质取样出来然后配合landscape grass output节点![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613041591836-3c9f0067-143d-4bb2-9a59-68322e8a1b9b.png#height=238&id=O0l3U&originHeight=238&originWidth=304&originalType=binary&ratio=1&rotation=0&showTitle=false&size=65007&status=done&style=none&title=&width=304)实现地貌使用对应地形材质时上面附带植物。其中grass节点参数即植物类型可以通过![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613041774477-1b7775e1-c22a-451c-bf0d-499d3d720f77.png#height=163&id=iGPIO&originHeight=163&originWidth=348&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18020&status=done&style=none&title=&width=348)地形草地类型来创建。<br />如果有根据斜率实现混合材质功能时，如果不想让有高度的地形出现植物则可以使用以下方法。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613042193892-6162b1f0-7525-4d91-bfa4-983401e3a396.png#height=370&id=ixeih&originHeight=370&originWidth=777&originalType=binary&ratio=1&rotation=0&showTitle=false&size=366337&status=done&style=none&title=&width=777)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613041766912-c9e9e76e-5345-4509-b54a-8329cd4d542f.png#height=163&id=GfNwq&originHeight=163&originWidth=348&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18020&status=done&style=none&title=&width=348)
<a name="iIMBB"></a>
## 地貌岩石材质
材质函数：<br />中间的节点为world aligned textures_complex<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613457701489-432a45cf-98be-402e-92cf-de7f02da3afc.png#height=600&id=lLWDn&originHeight=600&originWidth=798&originalType=binary&ratio=1&rotation=0&showTitle=false&size=565967&status=done&style=none&title=&width=798)<br />VertexNormalWS的作用是获取世界顶点坐标，和1，1，1相乘的作用是确保是三维数据。Normalize的作用是规范化，防止无限大无限小的值的出现。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613457803448-31da451e-29f1-41d4-90d1-562870d1ed53.png#height=563&id=ALg2H&originHeight=563&originWidth=711&originalType=binary&ratio=1&rotation=0&showTitle=false&size=320222&status=done&style=none&title=&width=711)
<a name="wljWo"></a>
## 海洋材质
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615283334627-72267a65-3a4b-4cfc-aa50-69afaff788fa.png#height=475&id=xWo6m&originHeight=475&originWidth=1018&originalType=binary&ratio=1&rotation=0&showTitle=false&size=422392&status=done&style=none&title=&width=1018)<br />越接近岸边海洋的折射率越低，通过![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615286149675-67f72aa5-a806-4819-a411-a1443664f048.png#height=711&id=u3Mne&originHeight=711&originWidth=1138&originalType=binary&ratio=1&rotation=0&showTitle=false&size=608561&status=done&style=none&title=&width=1138)控制。ref上方的结果是<br />海与其他物体交接处的透明度变化：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615292625446-a3c6299b-81e7-46ba-be68-a011aa96310c.png#height=196&id=nko10&originHeight=196&originWidth=367&originalType=binary&ratio=1&rotation=0&showTitle=false&size=89676&status=done&style=none&title=&width=367)<br />法线：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615289251998-25dbd2fc-a1f2-4bb4-b6b8-40e82047fa61.png#height=488&id=ToCf5&originHeight=488&originWidth=833&originalType=binary&ratio=1&rotation=0&showTitle=false&size=444221&status=done&style=none&title=&width=833)<br />海浪波动效果（使海浪有起伏感）：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615289306870-3b4fdf8c-ce0e-464d-8945-b055227c2866.png#height=635&id=fUJTX&originHeight=635&originWidth=1127&originalType=binary&ratio=1&rotation=0&showTitle=false&size=763206&status=done&style=none&title=&width=1127)整体连接到world displacement（需要开启![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615290174869-ddc0f7a1-5239-4fb3-a011-40a4206bb56c.png#height=89&id=INcst&originHeight=89&originWidth=321&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6727&status=done&style=none&title=&width=321)）这里texture图片显示有错误，应该四个贴图都是一样的。<br />浪花：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615289119637-89c67e81-eddc-475a-b1de-7ed55c44a22a.png#height=619&id=qNDwf&originHeight=619&originWidth=1295&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1083964&status=done&style=none&title=&width=1295)<br />使四张贴图混合的节点叫blend_screen。<br />与物体接触边缘海浪：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615292252884-3b2bed61-919d-44ef-84f4-c4c0f046cdc3.png#height=493&id=wvm89&originHeight=493&originWidth=1144&originalType=binary&ratio=1&rotation=0&showTitle=false&size=565776&status=done&style=none&title=&width=1144)<br />其中water_color可以扩展成![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1615292514786-d85f3ee4-d1ad-4ec3-9201-24311a50051d.png#height=552&id=v4YlR&originHeight=552&originWidth=1061&originalType=binary&ratio=1&rotation=0&showTitle=false&size=647333&status=done&style=none&title=&width=1061)效果是实现不同深度的地方水的透明度不同所造成的颜色差别。



<a name="KZSG9"></a>
## 角色材质
<a name="SLzee"></a>
### 角色制作技巧
眼球：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614583548867-04491506-03e7-43fa-a74e-288d3ab64135.png#height=515&id=xU2AW&originHeight=515&originWidth=587&originalType=binary&ratio=1&rotation=0&showTitle=false&size=533688&status=done&style=none&title=&width=587)<br />眼球和眼睑外层制作湿润效果（透明）![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614583575515-8d0690d2-9899-4a29-aa54-bb9c6d68ff74.png#height=239&id=HMuNt&originHeight=239&originWidth=716&originalType=binary&ratio=1&rotation=0&showTitle=false&size=312665&status=done&style=none&title=&width=716)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614583641110-573ed8c8-1577-48c2-874b-36b4304e7746.png#height=249&id=LEdED&originHeight=249&originWidth=591&originalType=binary&ratio=1&rotation=0&showTitle=false&size=268056&status=done&style=none&title=&width=591)<br />内眼角和眼球的过渡：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614583759941-0ee93bc4-5244-4a7a-847b-88021a49b634.png#height=122&id=cT1b3&originHeight=122&originWidth=207&originalType=binary&ratio=1&rotation=0&showTitle=false&size=77119&status=done&style=none&title=&width=207)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614583768543-792b55a5-1c61-4399-a56b-0cc2b8865388.png#height=182&id=spW0h&originHeight=182&originWidth=451&originalType=binary&ratio=1&rotation=0&showTitle=false&size=240882&status=done&style=none&title=&width=451)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614583817622-5f69a76b-a0e8-442b-af32-685b25ab012c.png#height=194&id=VIyi1&originHeight=194&originWidth=477&originalType=binary&ratio=1&rotation=0&showTitle=false&size=138493&status=done&style=none&title=&width=477)用来制造眼球到内眼角之间的过渡效果<br />男士睫毛要做的比女士睫毛短，双眼皮的睫毛比单眼皮的睫毛要长一些<br />从maya导出模型时设置：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614584404639-2739d35a-4822-4161-99c4-b529b895f09e.png#height=138&id=ilpSh&originHeight=138&originWidth=380&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24363&status=done&style=none&title=&width=380)
<a name="x47bj"></a>
### 人体材质
制作皮肤材质时着色模型选择次表面轮廓（[次表面轮廓着色模型](https://docs.unrealengine.com/zh-CN/RenderingAndGraphics/Materials/LightingModels/SubSurfaceProfile/index.html) 的性质与次表面（Subsurface）和预整合蒙皮（Preintegrated Skin）着色模型非常相似， 但该模型只适用于高端皮肤渲染。如果希望模拟皮肤，尤其是人类皮肤，该模型为着色模型最佳选择。）其中不透明度控制的是次表面散射的强度（光透过去效果的强度，为1时是完全开启的）<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614601555244-a1fe1e72-09cb-4ca1-a9fd-5415a996c9cc.png#height=182&id=FOVWd&originHeight=182&originWidth=389&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13424&status=done&style=none&title=&width=389)其中subsurfaceProfile通过右键![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614601608600-41e67ae0-0900-44ec-ae5f-7dde6998edb6.png#height=304&id=TTYFy&originHeight=304&originWidth=427&originalType=binary&ratio=1&rotation=0&showTitle=false&size=50014&status=done&style=none&title=&width=427)创造（整理时将次文件放置在新创建的DataTypes文件夹里，方便整理）命名规范举例：SSS_ColorSubsurfaceProfile。<br />次表面描述文件作用是可以通过参数调节次表面散射的颜色和衰减效果等。即描述次表面的文件。
<a name="w50Kh"></a>
#### 皮肤毛孔
两张贴图![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614750506362-00a3c1da-9c3b-489f-b6a4-ae9de21eaef9.png#height=105&id=UVvxA&originHeight=105&originWidth=140&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18663&status=done&style=none&title=&width=140)第一个是控制粗糙度贴图，第二个是法线贴图，首先将第一个贴图的srgb关掉，将调整属性中的最大透明度改为0，在复合属性中<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614750609639-da0a4cda-c2bf-4ded-b014-16122498fae6.png#height=180&id=fCnCr&originHeight=180&originWidth=490&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20797&status=done&style=none&title=&width=490)。这样调整后使用第一张贴图的alpha通道来实现效果
<a name="k1ImJ"></a>
### 眼睛材质
详细解析网站:[https://www.bbsmax.com/A/obzbDw665E/](https://www.bbsmax.com/A/obzbDw665E/)<br />眼球材质的着色模型为眼睛，混合模式改为遮罩。<br />眼球的虹膜边缘有轻微黑色的叫角膜缘![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614842835228-023910bf-423c-4045-893f-752f28be83cf.png#height=374&id=v9ua8&originHeight=374&originWidth=485&originalType=binary&ratio=1&rotation=0&showTitle=false&size=341187&status=done&style=none&title=&width=485)
<a name="FGA3z"></a>
## 布料材质
要制作不了材质首先要了解布料的特点，布料外边的绒毛在受到光的照射的情况下是发白的。因此做布料要制作边缘发白的效果。<br />UE4提供了专门的布料的着色模型，因此制作材质时首先更改为布料的着色模型，改为布料的着色模型后会为材质自动带有边缘发白的效果。材质属性变为这个：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635318382748-0ab67202-d9c2-478d-b90b-7e98f8d41d0b.png#clientId=ufe9bab15-286b-4&from=paste&height=456&id=uf571cf9a&originHeight=456&originWidth=135&originalType=binary&ratio=1&rotation=0&showTitle=false&size=50505&status=done&style=none&taskId=u2c7ba794-a5de-41ad-bb0f-82ecd940734&title=&width=135)其中Fuzz Color控制的是绒毛的颜色，Cloth控制的是边缘发白的强度。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635347078425-1e5b8371-4dcf-413e-aea9-d7b9d6a747eb.png#clientId=ubdb7170a-bac4-4&from=paste&height=353&id=ud21cc3b5&originHeight=353&originWidth=974&originalType=binary&ratio=1&rotation=0&showTitle=false&size=132697&status=done&style=none&taskId=ue5fb323c-adb4-4cbe-8d94-6d14afa8a3a&title=&width=974)
<a name="z5qrt"></a>
# 各种材质效果的实现
<a name="isttJ"></a>
## 摄像机的距离测量公式
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1613462337362-9ddc1ada-45bb-47c6-835c-f7a5c9798c22.png#height=378&id=Kkdev&originHeight=378&originWidth=1103&originalType=binary&ratio=1&rotation=0&showTitle=false&size=378605&status=done&style=none&title=&width=1103)
<a name="YCGrE"></a>
## 调节法线强度节点连线
第一种：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614050931370-0e9f23f6-40f2-4774-8eec-7601f10e7cb5.png#height=542&id=r1SnC&originHeight=542&originWidth=1179&originalType=binary&ratio=1&rotation=0&showTitle=false&size=660497&status=done&style=none&title=&width=1179)<br />第二种：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1614051425655-afb8aef8-86be-404e-a862-25e2efdc6ede.png#height=430&id=qTjpj&originHeight=430&originWidth=893&originalType=binary&ratio=1&rotation=0&showTitle=false&size=111909&status=done&style=none&title=&width=893)
<a name="tLoIj"></a>
## 置换材质效果的制作
首先更改<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622280261851-4652856f-dc56-4124-96f5-39de914d3b98.png#clientId=uf173c60b-90e8-4&from=paste&height=146&id=P9WnM&originHeight=146&originWidth=390&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10335&status=done&style=none&taskId=u99040f77-e488-4f83-85c9-95fb60a7b5f&title=&width=390)<br />其中无裂纹置换的作用：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622280489711-185d6f76-0a2b-479a-a365-e4fb74cbe045.png#clientId=uf173c60b-90e8-4&from=paste&height=66&id=fRRvq&originHeight=66&originWidth=340&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7178&status=done&style=none&taskId=u8df61418-f63d-4df9-8573-900b9997d03&title=&width=340)防止出现这种情况![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622280516237-c1e57047-67ab-46a2-81f1-b32865459be3.png#clientId=uf173c60b-90e8-4&from=paste&height=246&id=BPYX9&originHeight=246&originWidth=270&originalType=binary&ratio=1&rotation=0&showTitle=false&size=109163&status=done&style=none&taskId=ud0ba2e13-4634-405f-b042-fe8d79b3664&title=&width=270)<br />如果出现模型闪烁的情况可以增大模型的边界缩放的值<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622280721783-3653e809-ec9e-449c-ae1b-68a7fc1543a9.png#clientId=uf173c60b-90e8-4&from=paste&height=145&id=UCGsi&originHeight=145&originWidth=415&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16216&status=done&style=none&taskId=u2cb143c6-1a33-4da8-96c1-9a2c9a4db42&title=&width=415)<br />制作置换效果时：其中乘以40时为了控制置换强度，乘以vertexnormalws是为了使置换效果应用的方向正确。20连接到曲面细分乘数的作用是通过材质增加模型的细分程度（平时使用不需要给那么大给20是为了效果明显）。![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638424451517-3104071f-54e5-43a5-915a-821f0f69fe39.png#clientId=ucf3d029c-b5ee-4&from=paste&height=429&id=u1b2e9c9e&originHeight=429&originWidth=954&originalType=binary&ratio=1&rotation=0&showTitle=false&size=236843&status=done&style=none&taskId=u21929174-ddbb-456b-97cd-d702bce8993&title=&width=954)<br />使用vertexnormalws的效果：左边为没有使用，右边为使用。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638424524549-b66b42e4-3236-4a4d-891a-4a446d5ccca1.png#clientId=ucf3d029c-b5ee-4&from=paste&height=301&id=u88d7722b&originHeight=301&originWidth=296&originalType=binary&ratio=1&rotation=0&showTitle=false&size=105954&status=done&style=none&taskId=u3e4ffc7a-45aa-4e6f-aad3-462720e6255&title=&width=296)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638424540047-78316d47-2290-4e08-9589-8a41e3404689.png#clientId=ucf3d029c-b5ee-4&from=paste&height=379&id=u29e74f38&originHeight=379&originWidth=361&originalType=binary&ratio=1&rotation=0&showTitle=false&size=161076&status=done&style=none&taskId=ue6a4d350-0490-4f16-8e44-148c40a4683&title=&width=361)<br />此效果通过连接到世界场景位置偏移实现，但是需要模型自身具有较高的细分，因为世界场景位置偏移是通过更改顶点的位置实现的。它与置换的区别在于置换是虚幻四替你进行模型细分。<br />还有一个实现此效果的方法是利用视差，视差不会更改模型本身，视差是一种视觉特效。
<a name="UM3Wm"></a>
## 消融动画效果的实现
首先材质混合模式改为已遮罩。<br />![M_XiaoRong-MaterialGraph_0.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636470983592-b348db7a-c9e5-482d-a000-9f2ba1e93319.png#clientId=ue549dcdd-0c82-4&from=paste&height=1101&id=u219197c6&originHeight=1101&originWidth=2789&originalType=binary&ratio=1&rotation=0&showTitle=false&size=523324&status=done&style=none&taskId=u0948861d-cceb-4262-ab22-0eaa333e71e&title=&width=2789)
<a name="f49vZ"></a>
## 配合SP为基础材质增加控制各种mask的效果（mask可以为控制灰尘Dust区域，边缘Edge区域，污垢Dirt等）
为了获得相应的mask贴图，需要在sp中增加相应的通道，![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636903045017-717e05ab-da16-48f2-abdf-a405aa85df64.png#clientId=u74cbaf49-8f70-4&from=paste&height=301&id=u9d6c626e&originHeight=301&originWidth=387&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11112&status=done&style=none&taskId=u18555164-8489-4fb0-9d02-b54d394ce39&title=&width=387)<br />其中User012可以更改名称,在SP中分别为User012通道绘制对应效果的遮罩，然后将3个通道合并成一个Mask贴图，最后将Mask贴图和未应用基础材质时的法线贴图一起导出。<br />![M_Wood_Mask-MaterialGraph_0.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1637029936578-40e47b98-49df-4624-a127-5fb5b57f0711.png#clientId=u09b1e93e-5dc7-4&from=paste&height=2174&id=u7f931045&originHeight=2174&originWidth=3845&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1067896&status=done&style=none&taskId=ud91e0235-32f9-4bf7-a951-9be0847cae4&title=&width=3845)
<a name="ss5Vf"></a>
## 通过色温的数值控制颜色的变化（适用于自发光物体）
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638509954586-a69180bc-f760-4309-bd1b-4a4f4a3d13ec.png#clientId=u98cdc558-cdd0-4&from=paste&height=361&id=uffbb4125&originHeight=361&originWidth=898&originalType=binary&ratio=1&rotation=0&showTitle=false&size=151666&status=done&style=none&taskId=u64115190-6177-42fb-b146-a4db6c467ac&title=&width=898)<br />通过BlackBody（黑体），配合multiply来控制灯光强度。<br />注意：要想使自发光物体影响场景需要勾选勾选![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623845604794-ad5a08e9-71ee-4594-98c3-9d84bb4d8c34.png#clientId=ufc7f6dde-f510-4&from=paste&height=199&id=u17108840&originHeight=199&originWidth=437&originalType=binary&ratio=1&rotation=0&showTitle=false&size=43447&status=done&style=none&taskId=u164db0d1-e23d-4290-8cf2-03f0ec0e278&title=&width=437)
<a name="G7nxU"></a>
## 顶点动画
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636373300447-e8f606e0-5f4f-435b-89da-a2065c77986a.png#clientId=uf195ba77-fd4a-4&from=paste&height=153&id=oHSdN&originHeight=153&originWidth=414&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36777&status=done&style=none&taskId=u4113c055-0ba1-4db9-a3d7-dd7b547df4d&title=&width=414)
<a name="gDptk"></a>
### 雨打函数（下雨时植物的上下晃动动画）
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636379307953-d491c212-799b-4faa-94ae-5ec124188b19.png#clientId=uf195ba77-fd4a-4&from=paste&height=154&id=iML0E&originHeight=154&originWidth=742&originalType=binary&ratio=1&rotation=0&showTitle=false&size=52632&status=done&style=none&taskId=u9c7c3cc3-8dcc-46f1-8767-0fa8342b8cd&title=&width=742)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636373328912-11182695-8076-4fe4-86d8-28a5c8e2b4d3.png#clientId=uf195ba77-fd4a-4&from=paste&height=189&id=gWJvR&originHeight=189&originWidth=723&originalType=binary&ratio=1&rotation=0&showTitle=false&size=76578&status=done&style=none&taskId=u3c9ff52a-89d4-40f9-a574-70db34f1669&title=&width=723)<br />![NewMaterial-MaterialGraph_0.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636441659065-326c2cb8-cb87-4afb-88c1-e2972c2414dd.png#clientId=ufd83120d-35e8-4&from=paste&height=1798&id=fbk76&originHeight=1798&originWidth=3557&originalType=binary&ratio=1&rotation=0&showTitle=false&size=787588&status=done&style=none&taskId=u1eabae2a-6305-4ec5-b2b4-3015219df95&title=&width=3557)<br />其中localmask和worldmask均为noise贴图。
<a name="SPZPv"></a>
### 涟漪函数
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636463886141-8fe78b1f-0e28-42ce-a746-c32da9e5638f.png#clientId=u80b837d7-74ae-4&from=paste&height=256&id=kG8kX&originHeight=256&originWidth=617&originalType=binary&ratio=1&rotation=0&showTitle=false&size=49674&status=done&style=none&taskId=u52165ac5-ff13-428f-af6c-90417d60dc6&title=&width=617)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636463985926-92603e62-9a8a-4442-9f8d-46dccfe63d83.png#clientId=u80b837d7-74ae-4&from=paste&height=210&id=wrnmB&originHeight=210&originWidth=1118&originalType=binary&ratio=1&rotation=0&showTitle=false&size=69794&status=done&style=none&taskId=u0c8aaa80-303b-416e-99ff-d621971dae2&title=&width=1118)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1636463996557-fde6c6eb-89ad-4130-89d6-8504ca047cad.png#clientId=u80b837d7-74ae-4&from=paste&height=440&id=RS9mQ&originHeight=440&originWidth=729&originalType=binary&ratio=1&rotation=0&showTitle=false&size=237239&status=done&style=none&taskId=uea8f2e89-7a05-45e4-b5f2-5465487f130&title=&width=729)
<a name="ulTN5"></a>
### 通过材质实现模型自转：
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638429672433-edb10d94-c050-4921-96ee-952140860dc4.png#clientId=u86f14395-f274-4&from=paste&height=523&id=u07e9360f&originHeight=523&originWidth=1000&originalType=binary&ratio=1&rotation=0&showTitle=false&size=268389&status=done&style=none&taskId=uaf6fdb29-7672-48e1-a880-f4000742150&title=&width=1000)<br />在材质中实现模型自转占用的是gpu的性能，而利用c++或者蓝图或者sequence等实现模型自转占用的是cpu的性能。
<a name="DswQx"></a>
# 纹理
<a name="Eb6sr"></a>
## 纹理流送池
该纹理池的大小控制着实际用于要显示的纹理的空间量，<br />在制作场景时左上角可能会出现红字多少多少GiB预算上的纹理流送池。<br />虚幻默认的纹理流送池大小为2000MB，如果要更改纹理流送池的大小那么可以通过控制台输入<br />r.Streaming PoolSize 3000    其中3000是你想要更改的纹理流送池大小（单位是MB）<br />如果场景的纹理尺寸超过了纹理流送池的大小，那么虚幻将会通过Mipmap来降低纹理质量，这样会导致纹理模糊。<br />也可以通过项目文件夹中的DeaultEngine.ini文件中更改项目默认纹理流送池的大小。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638345137837-dec42d31-2773-4b19-95ea-cc1bb2eb005e.png#clientId=u956db895-dda4-4&from=paste&height=626&id=u8df3f22b&originHeight=626&originWidth=556&originalType=binary&ratio=1&rotation=0&showTitle=false&size=319980&status=done&style=none&taskId=uadfe382d-7ca9-4d07-ad5d-e0c76ebbb31&title=&width=556)
<a name="uJiOe"></a>
## 纹理尺寸与Mipmaps
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619754012054-7be99799-91c3-4c6a-9aa7-dfa0e11baaba.png#clientId=u1bc18f3f-7228-4&from=paste&height=388&id=u870426cd&originHeight=388&originWidth=1347&originalType=binary&ratio=1&rotation=0&showTitle=false&size=118494&status=done&style=none&taskId=uf1e2e10e-7ac1-42d5-942a-d3ea49c4692&title=&width=1347)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619753841558-a30a8842-925c-4c32-a245-871ee9386bf7.png#clientId=u1bc18f3f-7228-4&from=paste&height=417&id=u7e3fce28&originHeight=417&originWidth=861&originalType=binary&ratio=1&rotation=0&showTitle=false&size=101362&status=done&style=none&taskId=u18bb0ea2-c22b-4af8-af7e-dee0af0d600&title=&width=861)<br />Mipmap只支持2的n次幂的纹理大小<br />Mipmap的关闭：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619962459807-b407fe06-89bf-4c78-943a-2383ac2030ac.png#clientId=u68ae75f5-6fa7-4&from=paste&height=310&id=ubb0016d3&originHeight=310&originWidth=222&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21808&status=done&style=none&taskId=u663a4c81-e50e-42cb-8864-279958d700f&title=&width=222)  无mip贴图的设置通常适用于HDRI贴图和UI贴图上面。<br />还可以通过使用不同的锐化等级或者模糊等级来额外控制贴图是否模糊或锐化。<br />左侧为启用mipmap，右侧为未启用mipmap<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638345284922-c01e33ff-dcdc-471b-9a06-f3534a2908e1.png#clientId=u956db895-dda4-4&from=paste&height=625&id=uad0c6388&originHeight=625&originWidth=1742&originalType=binary&ratio=1&rotation=0&showTitle=false&size=801134&status=done&style=none&taskId=u4a216204-8ac2-4078-8c79-0b9dfa7845b&title=&width=1742)
<a name="MEGCy"></a>
## 纹理文件格式和纹理压缩
无论导入的纹理是什么格式的（TGA,PNG等），导入到UE4后，纹理都会被压缩成同一个格式的。<br />纹理压缩的设置：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619754739643-32b2e756-b3b0-4f0e-8449-af9d091a1deb.png#clientId=u56be4687-3a85-4&from=paste&height=226&id=u24572081&originHeight=226&originWidth=384&originalType=binary&ratio=1&rotation=0&showTitle=false&size=65567&status=done&style=none&taskId=u1a669889-5510-4c98-8ab5-2ba9fbf27dd&title=&width=384)通常只会使用前三个和HDR的设置，例如是法线贴图就使用Normalmap  灰度图就使用Masks（要想更高质量就用grayscale r8，需要确保只有一个通道）bc7格式需要满足dx11，bc7格式质量更好但是消耗内存会更大，bc7一般是如果分辨率较低的贴图才有可能会去使用。
<a name="SxnAa"></a>
## 纹理组的使用
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638345995199-26f783f3-889b-48e5-9eb7-304e12a617c8.png#clientId=u956db895-dda4-4&from=paste&height=425&id=u4e5abe8e&originHeight=425&originWidth=328&originalType=binary&ratio=1&rotation=0&showTitle=false&size=117219&status=done&style=none&taskId=u0c61cce0-ef5f-4de5-ab7f-9236c313fe6&title=&width=328)此处可以更改纹理组，默认情况下所有的纹理导入进项目中都将归为world组，导入纹理后可以为纹理归为不同的组，例如人物，武器，载具，虽然只进行组的归类并不会产生什么效果，但以后如果想要优化就可以针对组进行管理优化。<br />这些组其中除了UI和Color Lookup Table会更改纹理的效果控制，其他的组均没有额外控制，只是便于管理使用。<br />使项目针对不同设备对已经整理好的纹理组进行优化：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638346349812-e53c61ff-93f5-4c06-8276-917dfc44c6cc.png#clientId=u956db895-dda4-4&from=paste&height=732&id=ucd2fea81&originHeight=732&originWidth=397&originalType=binary&ratio=1&rotation=0&showTitle=false&size=279398&status=done&style=none&taskId=u219d5d56-c05d-495d-8abb-4e55e2a180b&title=&width=397)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638346428789-a14fb03a-852c-4c5f-9235-9655dad7d943.png#clientId=u956db895-dda4-4&from=paste&height=579&id=u2ab6f100&originHeight=579&originWidth=725&originalType=binary&ratio=1&rotation=0&showTitle=false&size=262428&status=done&style=none&taskId=ubf947451-97db-4f69-bbc1-3fb0786d994&title=&width=725)
<a name="k3izF"></a>
## 渲染目标
渲染目标本质上是虚幻引擎或编辑器生成的纹理<br />在虚幻编辑器中通过过程化生成的纹理就是渲染目标，例如在材质编辑器中中通过noise节点创建的noise纹理还有通过场景捕获创建出来的纹理（通过搜索场景捕获可以创建![IMG_20211201_164815.jpg](https://cdn.nlark.com/yuque/0/2021/jpeg/2623605/1638348514208-64db5869-d8fa-4ee6-9cce-40a4cc5adf25.jpeg#clientId=u7dbeae18-9745-4&from=ui&id=u6fe4950d&originHeight=356&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&size=46795&status=done&style=none&taskId=u47b74db5-8543-4c4e-9420-5df8cf3d0a8&title=)），。渲染目标占用的性能要更高。渲染目标会导致着色器开销过高。<br />渲染目标的使用可以实现雪的实时互动和水的实时互动等效果。
<a name="kjJmU"></a>
## 虚拟纹理
[https://zhuanlan.zhihu.com/p/127051539](https://zhuanlan.zhihu.com/p/127051539)
<a name="HUV5e"></a>
## 将贴图转换为纹理对象的好处
将贴图转换为纹理对象再使用贴图采样节点使用贴图的好处是多次使用同一张贴图时这样更节省纹理内存。<br />对象![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1642423516910-f47d4e0e-a975-4ebc-bd98-243d115447a8.png#clientId=udec924ca-7c97-4&from=paste&height=520&id=uc517dd6d&originHeight=520&originWidth=519&originalType=binary&ratio=1&rotation=0&showTitle=false&size=117785&status=done&style=none&taskId=u72487d68-d907-48fe-9dcc-eb519c4de1e&title=&width=519)
<a name="g7Gr8"></a>
# 视窗、世界、物体和切线空间
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1640009093546-7372dffb-119f-40bd-80b2-b57b89f38c17.png#clientId=ucec13de9-5e0d-4&from=paste&height=528&id=u7419cc96&originHeight=528&originWidth=804&originalType=binary&ratio=1&rotation=0&showTitle=false&size=114446&status=done&style=none&taskId=u584f7901-37fa-4a46-8f27-1cd93290642&title=&width=804)<br />世界空间：世界空间是恒定的，不管场景发生了什么，世界空间坐标系都不会改变。<br />物体空间：物体空间坐标系是随着物体改变的，随着物体的旋转平移，物体坐标系也会随着改变。<br />摄影机空间（视图空间）：摄影机空间坐标系由摄影机的照射位置为Z轴。<br />切线空间：切线空间是每个顶点都有对应的坐标系，坐标系的xyz是由法线，边法线，切线组成，边法线和切线能够代表UV坐标的U和V<br />如果是不同空间的向量，它们如果要进行运算就需要将它们转换为同一个空间。
<a name="fTQWu"></a>
# 使用PS制作一张不同通道存储不同灰度图的贴图
首先新建一个跟灰度图相同大小的文档![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619755127697-6734365f-8c95-4ef7-addf-8483f24cbcdf.png#clientId=u56be4687-3a85-4&from=paste&height=211&id=ucb3477ef&originHeight=211&originWidth=261&originalType=binary&ratio=1&rotation=0&showTitle=false&size=43062&status=done&style=none&taskId=udd50a818-46bf-423f-8d9e-23221b5e944&title=&width=261)分离出来三个通道![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619755195724-0beecce1-5c86-4635-bc2a-ea9f17d1caeb.png#clientId=u56be4687-3a85-4&from=paste&height=66&id=u25884a8c&originHeight=66&originWidth=631&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29628&status=done&style=none&taskId=u6ecda9c5-d7d6-4b4f-8574-4b8f62b5f2a&title=&width=631)<br />将三张贴图导入到不同通道的图层上，然后与背景合并起来。（Ctrl+E快捷键：是当前活动的操作图层和下一个图层合并。，Shift+Ctrl+E快捷键是合并可见图层，就是指图层前面有眼睛的图层都会被合并为一个图层。）<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619755186979-22648a60-fba0-46c6-bd29-d2fa6df1aaf2.png#clientId=u56be4687-3a85-4&from=paste&height=255&id=u7a1b30a2&originHeight=255&originWidth=234&originalType=binary&ratio=1&rotation=0&showTitle=false&size=49326&status=done&style=none&taskId=ucfe6011a-f974-482c-9eb3-896f0e9278f&title=&width=234)最后合并通道![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619755335276-8e5cfde1-22db-4716-80a2-1049aae0abed.png#clientId=u56be4687-3a85-4&from=paste&height=224&id=u9d58cf76&originHeight=224&originWidth=257&originalType=binary&ratio=1&rotation=0&showTitle=false&size=37099&status=done&style=none&taskId=u2083f708-13b8-4090-a6c7-f5a4983c99b&title=&width=257)选择RGB颜色模式<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619755356890-80152e53-3939-4f21-9610-4b5b6cef4245.png#clientId=u56be4687-3a85-4&from=paste&height=125&id=u978ef58c&originHeight=125&originWidth=220&originalType=binary&ratio=1&rotation=0&showTitle=false&size=48661&status=done&style=none&taskId=u162e2846-9bca-416f-bb54-bf05915c8b5&title=&width=220)
<a name="DHUTy"></a>
# sRGB与伽马矫正
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619755514807-2988e064-103f-4ca5-a36c-443472df7364.png#clientId=u56be4687-3a85-4&from=paste&height=731&id=ubca638cd&originHeight=731&originWidth=1570&originalType=binary&ratio=1&rotation=0&showTitle=false&size=569832&status=done&style=none&taskId=u5799db1d-e983-4622-a4b7-dc8301753f7&title=&width=1570)<br />给人看的就打开srgb，给电脑看的就关闭srgb（法线，金属度，粗糙度等贴图）。
<a name="idIeP"></a>
# Alpha通道
可以通过此方法添加Alpha通道![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619957171874-f8fe8182-0725-4039-bfe4-a98a992d1fa0.png#clientId=u577c96fb-b414-4&from=paste&height=348&id=u4bd3ccf4&originHeight=348&originWidth=307&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34942&status=done&style=none&taskId=u81b7e2cb-8ed0-4179-886f-1efba562bcd&title=&width=307)，UE4对Alpha通道的压缩成都是很低的，如果使用Alpha通道会使图片容量大幅度提高，可以通过此选项使不使用Alpha通道![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619957257319-7a2e9c96-46c3-4683-bcbb-9834a16dfd2a.png#clientId=u577c96fb-b414-4&from=paste&height=144&id=uf32d514f&originHeight=144&originWidth=376&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17133&status=done&style=none&taskId=ub74c1e87-3ff5-4ca9-ac86-3c5c80aaa2f&title=&width=376)。
<a name="ukIda"></a>
# 光栅化与前向渲染与延迟渲染
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619957319132-7c9160ff-27d2-4d5a-88df-4d0152016f2c.png#clientId=u577c96fb-b414-4&from=paste&height=691&id=ue4bb0515&originHeight=691&originWidth=1671&originalType=binary&ratio=1&rotation=0&showTitle=false&size=393171&status=done&style=none&taskId=u1381c9a9-c667-4feb-b4c6-9bb844cb7eb&title=&width=1671)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619957521559-1f013277-ff6f-4bba-9d37-079bb3bea6e0.png#clientId=u577c96fb-b414-4&from=paste&height=835&id=u721cecf1&originHeight=835&originWidth=1753&originalType=binary&ratio=1&rotation=0&showTitle=false&size=655202&status=done&style=none&taskId=u8591a17d-3a6e-4701-b1bd-7b7d461a66c&title=&width=1753)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619957584835-303cb504-e925-4f75-bedf-d2f6107a4909.png#clientId=u577c96fb-b414-4&from=paste&height=847&id=EdCJM&originHeight=847&originWidth=1753&originalType=binary&ratio=1&rotation=0&showTitle=false&size=715011&status=done&style=none&taskId=u1c1c601e-f022-4652-b1a9-d8ee72fdfad&title=&width=1753)<br />这里延迟渲染中介绍的G缓存中的图像合成就是可以将点光源当成周围有一个白色的球体遮罩，不同光源可以重叠相加在一起。![image.png](https://cdn.nlark.com/yuque/0/2022/png/2623605/1646306813242-d9946af1-70dc-4086-b44b-5ed09ff23aaf.png#clientId=u79105073-9823-4&from=paste&height=942&id=ubb3dc8ed&originHeight=1036&originWidth=891&originalType=binary&ratio=1&rotation=0&showTitle=false&size=150703&status=done&style=none&taskId=ufc258b72-f34e-4fbf-9aa8-23517ecbecf&title=&width=809.9999824437232)<br />**延迟渲染因为会生成各种缓存所以会占用带宽，因此VR中一般不使用延迟渲染而使用前向渲染。**

<a name="Lo4xh"></a>
# 遮蔽剔除和半透明材质

计算遮蔽关系<br />在一个场景里会包含大量物体，渲染时，被遮挡的物体是不用被渲染出来的。<br />所以需要进行遮挡关系的计算，通常来说主要有以下几点:<br />距离剔除、视锥剔除、遮蔽剔除、深度检测<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619958070977-25a3102f-c6ff-4fa9-94c2-3def8ec079f9.png#clientId=u577c96fb-b414-4&from=paste&height=809&id=u37936850&originHeight=809&originWidth=1712&originalType=binary&ratio=1&rotation=0&showTitle=false&size=617637&status=done&style=none&taskId=u15874052-6791-4b16-890d-84b8b313464&title=&width=1712)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619958348540-f0fda745-f046-44fd-99c0-3c89cbb82adb.png#clientId=u577c96fb-b414-4&from=paste&height=837&id=u76b43850&originHeight=837&originWidth=1720&originalType=binary&ratio=1&rotation=0&showTitle=false&size=494568&status=done&style=none&taskId=ube8a88b6-fe14-415d-b61c-8c801203358&title=&width=1720)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619958399126-968c830d-639f-46b9-a3b8-548ae9e67e3b.png#clientId=u577c96fb-b414-4&from=paste&height=697&id=u526ef0cd&originHeight=697&originWidth=1634&originalType=binary&ratio=1&rotation=0&showTitle=false&size=396714&status=done&style=none&taskId=u9ae57b4f-4cd3-427a-8e52-569a659b14a&title=&width=1634)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619958454418-d6e10a8f-c52e-48ae-be2d-1b9f40be3a87.png#clientId=u577c96fb-b414-4&from=paste&height=443&id=u269be023&originHeight=443&originWidth=1626&originalType=binary&ratio=1&rotation=0&showTitle=false&size=207567&status=done&style=none&taskId=u64eb4a1e-fb6f-49d9-badc-6eb7508815f&title=&width=1626)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619958504144-1bee99b2-ce8f-4512-89fa-d74d72aff81b.png#clientId=u577c96fb-b414-4&from=paste&height=611&id=uc264b71b&originHeight=611&originWidth=1698&originalType=binary&ratio=1&rotation=0&showTitle=false&size=391659&status=done&style=none&taskId=u084afd18-0c4a-4020-a08f-419b70f18bc&title=&width=1698)若出现半透明物体的渲染排序问题时，可以通过更改半透明排序优先级来进行调整。![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619959584997-f95b1737-7a13-42c7-a0c3-e5c7f404879c.png#clientId=u577c96fb-b414-4&from=paste&height=267&id=u31112d85&originHeight=267&originWidth=391&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20502&status=done&style=none&taskId=u1e733cb4-550e-42fc-a22b-5d7f09b857e&title=&width=391)
<a name="Os6qb"></a>
# 纹理采样
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619961450400-d5966482-3303-4153-b9e4-c4729887c586.png#clientId=u68ae75f5-6fa7-4&from=paste&height=561&id=u65f3d95f&originHeight=561&originWidth=1216&originalType=binary&ratio=1&rotation=0&showTitle=false&size=261231&status=done&style=none&taskId=uc913801f-fa7c-48a9-bc8b-f95fcc1faa8&title=&width=1216)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619962887551-3af054f2-3ace-4d9f-a069-9aa6496af946.png#clientId=u68ae75f5-6fa7-4&from=paste&height=26&id=u2832ef39&originHeight=26&originWidth=358&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2671&status=done&style=none&taskId=u3a6e2901-a711-4b4d-a4ac-fe649113ade&title=&width=358)：只会采样0\~1，大于1，小于0都不会采样。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1619962908557-384e4b8b-6a03-4f68-beb8-0c78eb0e061d.png#clientId=u68ae75f5-6fa7-4&from=paste&height=365&id=u15dd2b68&originHeight=365&originWidth=722&originalType=binary&ratio=1&rotation=0&showTitle=false&size=98189&status=done&style=none&taskId=u3d0f3fa3-42b5-48f0-8417-d6f2822b072&title=&width=722)
<a name="d8ftO"></a>
# 极坐标
把一张普通的贴图转换成极坐标形式可以直接用这个节点：VectorToRadiaValue<br />原来的纹理：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620360285961-d6eae720-8bde-41da-965a-707c41062d75.png#clientId=u521c939d-d097-4&from=paste&height=122&id=uabdedaff&originHeight=122&originWidth=123&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18489&status=done&style=none&taskId=u69d09ecb-e15a-4677-b1d2-7aadb389fd3&title=&width=123)<br />经过节点转换后的纹理：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620360325525-a45f824e-4edc-4828-ae65-9e153a21855f.png#clientId=u521c939d-d097-4&from=paste&height=117&id=uc2f3e792&originHeight=117&originWidth=350&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41901&status=done&style=none&taskId=u672f6796-d847-481b-b358-d89964063d7&title=&width=350)<br />节点的X Y 通道：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620360348917-ca604f23-c3d9-4a94-afb2-bdae1d71f41d.png#clientId=u521c939d-d097-4&from=paste&height=240&id=u05b69908&originHeight=240&originWidth=642&originalType=binary&ratio=1&rotation=0&showTitle=false&size=131748&status=done&style=none&taskId=u7bb405d0-70c1-4b58-a10e-7c33c286c31&title=&width=642)<br />制作技能CD的效果：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620360484955-a570286c-79c0-4ed4-9487-7e337e10885c.png#clientId=u521c939d-d097-4&from=paste&height=531&id=u68a65496&originHeight=531&originWidth=1052&originalType=binary&ratio=1&rotation=0&showTitle=false&size=467269&status=done&style=none&taskId=u03031379-e930-4850-9dc1-5aa133467cb&title=&width=1052)<br />只利用的他的x坐标，他的x坐标逆时针的大小是从1\~0，所以给他慢慢加上0\~1，这样他的x坐标就会慢慢的变成2\~1。
<a name="lVQiz"></a>
# 马赛克贴图的制作
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620630895052-c58177dc-32ac-417c-b153-3f7c9af74eb0.png#clientId=u103a9a56-7bc9-4&from=paste&height=407&id=u5c77c9bc&originHeight=407&originWidth=895&originalType=binary&ratio=1&rotation=0&showTitle=false&size=416918&status=done&style=none&taskId=u8d50c946-e3e7-40b4-aae2-c9024145f44&title=&width=895)
<a name="EIg5m"></a>
#  控制材质预览窗口的自动曝光
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620779255297-35d1ab45-421d-42f9-b345-63a58d0c9cb5.png#clientId=ub9cd3185-0d1c-4&from=paste&height=398&id=u63f17cb5&originHeight=398&originWidth=194&originalType=binary&ratio=1&rotation=0&showTitle=false&size=93710&status=done&style=none&taskId=ueb35ae2f-25cc-4bec-9b08-86f485a891c&title=&width=194)将Auto取消勾选
<a name="ckeyZ"></a>
# 消融材质效果制作
首先将材质属性的混合模式更改为masked![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620779438114-b6d19876-7aaa-45d3-88e5-b4a1c54d8d79.png#clientId=ub9cd3185-0d1c-4&from=paste&height=171&id=u20b2da9a&originHeight=171&originWidth=362&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36212&status=done&style=none&taskId=uf0ef7426-c1c8-4fad-ab80-fc2595df2b1&title=&width=362)<br />消融效果：<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620779519978-ddbd15a3-aaa9-4221-a446-7b74c33d650c.png#clientId=ub9cd3185-0d1c-4&from=paste&height=590&id=u7f232097&originHeight=590&originWidth=1083&originalType=binary&ratio=1&rotation=0&showTitle=false&size=527604&status=done&style=none&taskId=ue67a4a86-dc91-4d55-b27f-176dfd77591&title=&width=1083)<br />增加边缘效果：
<a name="r0BqE"></a>
# ![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620779752614-fb047c8f-5226-4afd-834b-b0af7f134470.png#clientId=ub9cd3185-0d1c-4&from=paste&height=689&id=u4b3a20e9&originHeight=689&originWidth=1130&originalType=binary&ratio=1&rotation=0&showTitle=false&size=624538&status=done&style=none&taskId=uc4b3a31c-3d4d-4e51-ab49-ef8613d23ab&title=&width=1130)还原ps图层混合模式
multiply节点对应着ps混合模式中的正片叠底<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620780819673-de7fe43a-6336-4201-862f-43bce7b53dea.png#clientId=ub9cd3185-0d1c-4&from=paste&height=508&id=u5daae255&originHeight=508&originWidth=418&originalType=binary&ratio=1&rotation=0&showTitle=false&size=238894&status=done&style=none&taskId=uff42292f-96bb-4b4c-a2cb-f6537e21ee7&title=&width=418)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620780826901-04c7287b-0731-4dbc-a3cd-706a714f841d.png#clientId=ub9cd3185-0d1c-4&from=paste&height=195&id=ued09da91&originHeight=195&originWidth=205&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30250&status=done&style=none&taskId=u3d0f9b3e-2671-4df3-b952-2af4848a3be&title=&width=205)（注意图层顺序是相反的）<br />Blend_ColorBurn 对应着ps的颜色加深混合模式，公式为![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1620781635866-ac245a9c-b7fe-4d61-90f1-111d1744618d.png#clientId=ub9cd3185-0d1c-4&from=paste&height=538&id=cFVkA&originHeight=538&originWidth=623&originalType=binary&ratio=1&rotation=0&showTitle=false&size=348738&status=done&style=none&taskId=ue587a1f7-fb8d-4a47-b0d8-efd56c6b868&title=&width=623)<br />ue4中有ps全部混合模式的算法的材质函数，只需要搜索混合模式的英文名称即可找出对应的材质函数。
<a name="rdgv4"></a>
# 顶点着色器
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622274503310-147ada6a-a798-4d92-993e-de6ce365eea9.png#clientId=u97b50cb9-6869-4&from=paste&height=483&id=u5fa2cb34&originHeight=483&originWidth=1293&originalType=binary&ratio=1&rotation=0&showTitle=false&size=158030&status=done&style=none&taskId=u541e5d8c-d401-4193-bc00-7b87a1ce4fb&title=&width=1293)
<a name="XlIqB"></a>
# WPO
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622274602868-5217a655-f7cc-4d9d-bfbf-d0c7986bd430.png#clientId=u97b50cb9-6869-4&from=paste&height=591&id=u3eac71be&originHeight=591&originWidth=1336&originalType=binary&ratio=1&rotation=0&showTitle=false&size=233126&status=done&style=none&taskId=u389769ac-9dd2-43c7-99da-65ebc8fd3b1&title=&width=1336)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622274650692-c1c2e6c2-f33b-4dfb-b7c3-e36309715ba6.png#clientId=u97b50cb9-6869-4&from=paste&height=411&id=u900380cd&originHeight=411&originWidth=186&originalType=binary&ratio=1&rotation=0&showTitle=false&size=63142&status=done&style=none&taskId=udf7f0990-dcf3-457a-bbc0-d136030345d&title=&width=186) 
<a name="tf6AD"></a>
# PDO
PDO对应的是像素深度偏移（深度偏移即是像素离你的远近的偏移），可以通过控制像素深度偏移来制造材质边缘柔和的效果<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624093562030-8c9c08d7-fa43-45f5-9c2a-309880e9bd43.png#clientId=ucde280f4-b9e8-4&from=paste&height=780&id=u626dac8f&originHeight=780&originWidth=1287&originalType=binary&ratio=1&rotation=0&showTitle=false&size=780820&status=done&style=none&taskId=ud2180a53-7921-46ea-b2ae-d51b9da5ab9&title=&width=1287)

PDO为0：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623753027889-b50713ba-64f1-4795-80a0-5896f8568fdc.png#clientId=u773f9f89-5434-4&from=paste&height=325&id=u4a05cbf3&originHeight=325&originWidth=422&originalType=binary&ratio=1&rotation=0&showTitle=false&size=356271&status=done&style=none&taskId=u790edb85-84b9-4f55-8303-cdea68975d2&title=&width=422)<br />PDO为2：![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1623753044640-43ce3e66-78c5-4358-8434-6681780b366e.png#clientId=u773f9f89-5434-4&from=paste&height=281&id=ucef49570&originHeight=281&originWidth=441&originalType=binary&ratio=1&rotation=0&showTitle=false&size=321666&status=done&style=none&taskId=ub9ac40cb-541b-4427-bc3d-87315936f96&title=&width=441)
<a name="k8ymg"></a>
# 进阶边界混合
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624106716142-3548513f-2952-4300-9c1a-65e9452aac15.png#clientId=u14815254-052e-4&from=paste&height=674&id=u4ce3d938&originHeight=674&originWidth=907&originalType=binary&ratio=1&rotation=0&showTitle=false&size=418062&status=done&style=none&taskId=ue8f18a16-064c-49ef-818c-60d580c09e8&title=&width=907)<br />注：Normal贴图对应WAN节点，其他例如base color ，roughness都可以使用WAT节点。 <br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624108433767-d6e70b32-8de1-4ec8-9457-7ae632f61344.png#clientId=u77e2c38b-537e-4&from=paste&height=268&id=u89a96503&originHeight=268&originWidth=410&originalType=binary&ratio=1&rotation=0&showTitle=false&size=201297&status=done&style=none&taskId=u5b9f8fac-d276-4381-95cb-1be2a1b67ef&title=&width=410)![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624108456182-981bafa4-4292-48e0-8701-6f3d64b6545a.png#clientId=u77e2c38b-537e-4&from=paste&height=359&id=ueaefe74b&originHeight=359&originWidth=525&originalType=binary&ratio=1&rotation=0&showTitle=false&size=331427&status=done&style=none&taskId=udfbf4365-3769-4b46-b8ea-ccf1445383b&title=&width=525)<br />基于世界坐标投影贴图，使不同物体在纹理的衔接更好。

![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624107697192-e6d32761-35ae-4540-aacd-90409eefcf1f.png#clientId=u9da7e89b-8b0b-4&from=paste&height=798&id=ud77e11ed&originHeight=798&originWidth=1765&originalType=binary&ratio=1&rotation=0&showTitle=false&size=733078&status=done&style=none&taskId=u760c218d-2176-46fc-bbf8-357adeb815a&title=&width=1765)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624108738641-78986a6c-7cb5-4bee-ad4f-db95fb71d948.png#clientId=u77e2c38b-537e-4&from=paste&height=233&id=ud62c1a10&originHeight=233&originWidth=1203&originalType=binary&ratio=1&rotation=0&showTitle=false&size=297975&status=done&style=none&taskId=ub795c806-5f85-4010-8ba5-9603227396e&title=&width=1203)
<a name="XlCyt"></a>
# 视差原理
视差和置换相比，他是配合高度图，和camera vector来实现效果，如图所示节点连法（等同于bump offset 节点）。![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622288093205-bd3d58aa-c9ac-463f-9738-f2b53c1b7e4a.png#clientId=uc372ed77-5e71-4&from=paste&height=467&id=u9d059d39&originHeight=467&originWidth=838&originalType=binary&ratio=1&rotation=0&showTitle=false&size=371817&status=done&style=none&taskId=u272e336a-cbda-4a96-81b8-9f959cb7686&title=&width=838)<br />等同于![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622290061565-d95fac6d-297d-43cc-8fee-b5e9a3d0b0c9.png#clientId=u31165324-4f0c-4&from=paste&height=582&id=u297d1901&originHeight=582&originWidth=836&originalType=binary&ratio=1&rotation=0&showTitle=false&size=397139&status=done&style=none&taskId=u35cfcadd-bedb-4649-86fc-fccd6c3b415&title=&width=836) <br />使用此原理实现的效果 相比置换的优势在于它不需要模型拥有很高的面数。
<a name="CglMI"></a>
# 材质参数集
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622294520888-a0da46bb-7887-44fa-bb2c-66ee868ff202.png#clientId=ue4a00775-a6ca-4&from=paste&height=287&id=uf4ae7b56&originHeight=287&originWidth=319&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35356&status=done&style=none&taskId=u24db4741-ea31-4df8-af5f-b9037118dc0&title=&width=319) 材质参数集的作用是  将材质参数集的参数放入到其他多个材质中，只需要调整材质参数集中的参数即可控制全部使用材质参数集的材质的参数。
<a name="ie6xZ"></a>
# 光照函数材质
材质中![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622357345514-7ce3088f-1860-460b-a800-9d9c69d2cef5.png#clientId=ua3f34d0a-8152-4&from=paste&height=185&id=u10794036&originHeight=185&originWidth=356&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14498&status=done&style=none&taskId=udeb6c498-521f-4522-bf16-029c31c8eba&title=&width=356)，光照函数材质是赋予聚光灯 点光源 等光源的材质，可以制造假投影的效果，针对图形的数学运算（例如旋转，平移，缩放）都可以在材质中实现，但是颜色是受灯光的颜色控制的。![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622357561644-bf90c36f-e74e-4eb1-a338-357cbe79fb59.png#clientId=ua3f34d0a-8152-4&from=paste&height=428&id=u95ce0b71&originHeight=428&originWidth=503&originalType=binary&ratio=1&rotation=0&showTitle=false&size=133059&status=done&style=none&taskId=uc1b0fb97-03f9-4bf5-90ab-26f8a68c7e3&title=&width=503)
<a name="ljBiS"></a>
# 后期处理材质
在材质中更改<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622359460917-f3019a92-cdd8-4504-bac4-15826fd5c836.png#clientId=u39820a50-c3e5-4&from=paste&height=112&id=u1542e0ca&originHeight=112&originWidth=334&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11260&status=done&style=none&taskId=u067e6182-dca6-4887-b938-745e3bae640&title=&width=334)<br />scene texture![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622359592187-78e447e8-786d-4a1b-af08-c1987213ef99.png#clientId=u39820a50-c3e5-4&from=paste&height=139&id=uc3dd4717&originHeight=139&originWidth=193&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21434&status=done&style=none&taskId=u0dbe6d4c-435a-479b-a3bf-96a83ce5ac8&title=&width=193) 节点，只能在后期处理材质中使用![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1622359630803-eae25867-9946-48fe-82e2-89fe9b8f94bf.png#clientId=u39820a50-c3e5-4&from=paste&height=454&id=u0b970e88&originHeight=454&originWidth=415&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38397&status=done&style=none&taskId=uaf10414d-3dde-4a48-9109-ecb66e214ab&title=&width=415) 
<a name="BHKfb"></a>
# BRDF 双向反射分布函数
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624083470756-54cbc62e-495f-4729-99b3-6b0cf2d187cd.png#clientId=u47f46ddb-e7a8-4&from=paste&height=287&id=u8b4bff8b&originHeight=287&originWidth=943&originalType=binary&ratio=1&rotation=0&showTitle=false&size=211341&status=done&style=none&taskId=u1557f700-8393-4738-a8d1-f23b2de54d6&title=&width=943)
<a name="jw08W"></a>
# 高光
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1624083876740-1005ffdb-ef73-40f7-a442-e0a2345cb338.png#clientId=u47f46ddb-e7a8-4&from=paste&height=221&id=uee15eef9&originHeight=221&originWidth=814&originalType=binary&ratio=1&rotation=0&showTitle=false&size=77434&status=done&style=none&taskId=u9e3cc8d3-1f15-439f-9cbf-0c988d6034a&title=&width=814)
<a name="dvGCP"></a>
# subsurface scattering 次表面散射
次表面散射简称SSS<br />具有次表面散射特性的物体有植物（树叶，荷叶），皮肤，冰面，大理石，蜡烛，牛奶，雪。<br />次表面散射是厚度敏感的，例如人的皮肤，越薄的地方次表面散射效果越明显
<a name="Ty9Bf"></a>
# ![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635066389482-f5ba55ff-9062-47e6-9c95-a11b427b6fe1.png#clientId=uf76c5918-398b-4&from=paste&height=685&id=uc19254e0&originHeight=685&originWidth=1084&originalType=binary&ratio=1&rotation=0&showTitle=false&size=152430&status=done&style=none&taskId=uafc09dba-eaf7-4098-ae8d-c1e4861e2b5&title=&width=1084)
在Bridge导入到UE4的植物的材质中提高SSS强度的数值会增加穿透过植物的光线量<br />SSS color tint控制的是穿透出来的颜色，一般不需要更改<br />color variation控制的是植物颜色变化（使叶子的颜色不那么统一）如果要更改数值，一般给很小的数值，0.02左右。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635067676329-727f04b9-6e61-4da2-a9a0-4c67f133c368.png#clientId=ub1b4b051-3ba9-4&from=paste&height=378&id=ue3f60a12&originHeight=378&originWidth=388&originalType=binary&ratio=1&rotation=0&showTitle=false&size=69526&status=done&style=none&taskId=u749762e2-e0f0-4d2e-8234-39555a90ea4&title=&width=388)<br />在UE4中制作SSS效果的材质：植物材质的着色模型给双面植物开启双面混合模式改为已遮罩。<br />其他的一些SSS材质着色模型改为次表面。<br />通过不透明度的大小来调整SSS的强度

<a name="pdFYa"></a>
# 折射
折射是厚度不敏感的。例如玻璃<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1635066947285-d6885fa3-e9aa-4446-8810-e99366bb2874.png#clientId=ub1b4b051-3ba9-4&from=paste&height=854&id=u9d0071ed&originHeight=854&originWidth=1308&originalType=binary&ratio=1&rotation=0&showTitle=false&size=136615&status=done&style=none&taskId=udba11e4c-5214-4a63-a8d8-8783d08b664&title=&width=1308)<br />如果折射出现了这种奇怪的效果，可以通过更改![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638442390663-8c102e84-d50c-4552-88f4-f88ee69327df.png#clientId=u021bd104-3fcf-4&from=paste&height=102&id=u186d6ac5&originHeight=102&originWidth=255&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7855&status=done&style=none&taskId=u6565a562-7c8f-4bd1-a2cf-a5538b3eb6c&title=&width=255)，更改的这种折射模式适用于水这种大型折射表面。<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638442259597-d049ed9d-61c7-4918-9719-7d5f03a7aecc.png#clientId=u021bd104-3fcf-4&from=paste&height=671&id=u90bc2bef&originHeight=671&originWidth=1428&originalType=binary&ratio=1&rotation=0&showTitle=false&size=934020&status=done&style=none&taskId=u3a98f32d-cd2c-4c10-a375-37bbc721e99&title=&width=1428)
<a name="KK2Ig"></a>
# 环境光遮蔽的正确使用
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2623605/1638431382054-8de0bff9-7e70-4a42-b0e2-ddc21879989c.png#clientId=u1a34cf16-c436-4&from=paste&height=671&id=u93fbd439&originHeight=671&originWidth=769&originalType=binary&ratio=1&rotation=0&showTitle=false&size=270184&status=done&style=none&taskId=uaa0aedd1-1204-48e2-aa23-988ecf1b1c2&title=&width=769)<br />为了让环境光遮蔽效果更好  需要通过lerp节点控制高光的产生区域，使用lerp目的是在即使只有动态光照的情况下也能够显示正确的环境光遮蔽效果。
